
> date()
[1] "Sat May 11 20:01:42 2019"

> # Header----
> options(scipen = 999)

> # Load packages
> require(data.table)

> require(knitr)

> require(icd)

> # Part I----
> # Load MIDAS----
> # NOTE: data was preprocessed. See project 
> # 'midas' R script 'export_midas_from_csv_to_rdata_v4.R'
> system.ti .... [TRUNCATED] 
   user  system elapsed 
 170.49    6.56  195.02 

> midas15
            Patient_ID    patbdte NEWDTD SEX CAUSE ADM_TYPE     ADMDAT    DSCHDAT HOSP   ZIP STATUS TOTBIL   DX1   DX2   DX3   DX4   DX5
       1: 'CCISAF01313 1968-07-26   <NA>   F              3 2012-01-31 2012-01-31  001 07094      1  21884  5920  4019  3051  V180      
       2: 'CCISAF01313 1968-07-26   <NA>   F              3 2012-04-11 2012-04-11  001 07094      1  20934  5920  4011  3051  3004 37900
       3: 'CCISAF01313 1968-07-26   <NA>   F              1 2013-05-03 2013-05-05  001 07094      1  28291 53541  5180  2800 37900  3051
       4: 'CCISAF01313 1968-07-26   <NA>   F              1 2013-05-06 2013-05-08  001 07094      1  35960  4239 37909 53540  4476  4019
       5: 'CCISAF01313 1968-07-26   <NA>   F              3 2015-05-22 2015-05-22   10 07094      1  18220   470  4780  4732  4730  4019
      ---                                                                                                                               
18057024: ZIRGANF08030 1945-10-27   <NA>   F              1 2014-12-01 2014-12-05  070 08510      1  83540  1977 49390 32723  4019  V103
18057025: ZIRGANF08030 1945-10-27   <NA>   F              1 2015-02-09 2015-02-19   00 08510      6 215685 41519 28411  1977  5119 49121
18057026: ZUGAAMF02252 1925-10-31   <NA>   F              3 2010-04-16 2010-04-16  009 07110      1   7751  7172 71749 71536 40290  7176
18057027: ZUGAAMF02252 1925-10-31   <NA>   F              2 2013-06-18 2013-06-18  009 07110      1   1473  5990  4019                  
18057028: ZUGAAMF02252 1925-10-31   <NA>   F              2 2015-11-25 2015-11-25   90 07110      1   2675  8461 71945  7202  4019 45989
            DX6   DX7   DX8   DX9 PROC1 PROC2 PROC3 PROC4 PROC5 PROC6 PROC7 PROC8 DIV      PRIME YEAR DSCYR check AGE  RACE       HISPAN
       1:                          9851                                             0 COMMERCIAL 2012  2012 FALSE  43 White Non-Hispanic
       2:  4476  3888 27949 V5865  9851                                             0 COMMERCIAL 2012  2012 FALSE  43 White Non-Hispanic
       3:  4019  4476  5533 V1749  4516                                             0 COMMERCIAL 2013  2013 FALSE  44 White Non-Hispanic
       4:  V180 V1749                                                               0 COMMERCIAL 2013  2013 FALSE  44 White Non-Hispanic
       5:  4478 V5869                                                                 COMMERCIAL 2015  2015 FALSE  46 White Non-Hispanic
      ---                                                                                                                               
18057024: V1582                    5011  8741  8801  8876                           0 COMMERCIAL 2014  2014 FALSE  69 White Non-Hispanic
18057025: 49122  1985  1748  V140  8741  9905  8801  8877                             COMMERCIAL 2015  2015 FALSE  69 White Non-Hispanic
18057026: 72700  7177 V7284         806                                             0   medicare 2010  2010 FALSE  84 White Non-Hispanic
18057027:                                                                           0   medicare 2013  2013 FALSE  87 White     Hispanic
18057028:  7246                                                                         medicare 2015  2015 FALSE  90 White     Hispanic

> # Remove unused variables----
> midas15[, ZIP := NULL]
            Patient_ID    patbdte NEWDTD SEX CAUSE ADM_TYPE     ADMDAT    DSCHDAT HOSP STATUS TOTBIL   DX1   DX2   DX3   DX4   DX5   DX6
       1: 'CCISAF01313 1968-07-26   <NA>   F              3 2012-01-31 2012-01-31  001      1  21884  5920  4019  3051  V180            
       2: 'CCISAF01313 1968-07-26   <NA>   F              3 2012-04-11 2012-04-11  001      1  20934  5920  4011  3051  3004 37900  4476
       3: 'CCISAF01313 1968-07-26   <NA>   F              1 2013-05-03 2013-05-05  001      1  28291 53541  5180  2800 37900  3051  4019
       4: 'CCISAF01313 1968-07-26   <NA>   F              1 2013-05-06 2013-05-08  001      1  35960  4239 37909 53540  4476  4019  V180
       5: 'CCISAF01313 1968-07-26   <NA>   F              3 2015-05-22 2015-05-22   10      1  18220   470  4780  4732  4730  4019  4478
      ---                                                                                                                               
18057024: ZIRGANF08030 1945-10-27   <NA>   F              1 2014-12-01 2014-12-05  070      1  83540  1977 49390 32723  4019  V103 V1582
18057025: ZIRGANF08030 1945-10-27   <NA>   F              1 2015-02-09 2015-02-19   00      6 215685 41519 28411  1977  5119 49121 49122
18057026: ZUGAAMF02252 1925-10-31   <NA>   F              3 2010-04-16 2010-04-16  009      1   7751  7172 71749 71536 40290  7176 72700
18057027: ZUGAAMF02252 1925-10-31   <NA>   F              2 2013-06-18 2013-06-18  009      1   1473  5990  4019                        
18057028: ZUGAAMF02252 1925-10-31   <NA>   F              2 2015-11-25 2015-11-25   90      1   2675  8461 71945  7202  4019 45989  7246
            DX7   DX8   DX9 PROC1 PROC2 PROC3 PROC4 PROC5 PROC6 PROC7 PROC8 DIV      PRIME YEAR DSCYR check AGE  RACE       HISPAN
       1:                    9851                                             0 COMMERCIAL 2012  2012 FALSE  43 White Non-Hispanic
       2:  3888 27949 V5865  9851                                             0 COMMERCIAL 2012  2012 FALSE  43 White Non-Hispanic
       3:  4476  5533 V1749  4516                                             0 COMMERCIAL 2013  2013 FALSE  44 White Non-Hispanic
       4: V1749                                                               0 COMMERCIAL 2013  2013 FALSE  44 White Non-Hispanic
       5: V5869                                                                 COMMERCIAL 2015  2015 FALSE  46 White Non-Hispanic
      ---                                                                                                                         
18057024:                    5011  8741  8801  8876                           0 COMMERCIAL 2014  2014 FALSE  69 White Non-Hispanic
18057025:  1985  1748  V140  8741  9905  8801  8877                             COMMERCIAL 2015  2015 FALSE  69 White Non-Hispanic
18057026:  7177 V7284         806                                             0   medicare 2010  2010 FALSE  84 White Non-Hispanic
18057027:                                                                     0   medicare 2013  2013 FALSE  87 White     Hispanic
18057028:                                                                         medicare 2015  2015 FALSE  90 White     Hispanic

> midas15[, TOTBIL := NULL]
            Patient_ID    patbdte NEWDTD SEX CAUSE ADM_TYPE     ADMDAT    DSCHDAT HOSP STATUS   DX1   DX2   DX3   DX4   DX5   DX6   DX7
       1: 'CCISAF01313 1968-07-26   <NA>   F              3 2012-01-31 2012-01-31  001      1  5920  4019  3051  V180                  
       2: 'CCISAF01313 1968-07-26   <NA>   F              3 2012-04-11 2012-04-11  001      1  5920  4011  3051  3004 37900  4476  3888
       3: 'CCISAF01313 1968-07-26   <NA>   F              1 2013-05-03 2013-05-05  001      1 53541  5180  2800 37900  3051  4019  4476
       4: 'CCISAF01313 1968-07-26   <NA>   F              1 2013-05-06 2013-05-08  001      1  4239 37909 53540  4476  4019  V180 V1749
       5: 'CCISAF01313 1968-07-26   <NA>   F              3 2015-05-22 2015-05-22   10      1   470  4780  4732  4730  4019  4478 V5869
      ---                                                                                                                              
18057024: ZIRGANF08030 1945-10-27   <NA>   F              1 2014-12-01 2014-12-05  070      1  1977 49390 32723  4019  V103 V1582      
18057025: ZIRGANF08030 1945-10-27   <NA>   F              1 2015-02-09 2015-02-19   00      6 41519 28411  1977  5119 49121 49122  1985
18057026: ZUGAAMF02252 1925-10-31   <NA>   F              3 2010-04-16 2010-04-16  009      1  7172 71749 71536 40290  7176 72700  7177
18057027: ZUGAAMF02252 1925-10-31   <NA>   F              2 2013-06-18 2013-06-18  009      1  5990  4019                              
18057028: ZUGAAMF02252 1925-10-31   <NA>   F              2 2015-11-25 2015-11-25   90      1  8461 71945  7202  4019 45989  7246      
            DX8   DX9 PROC1 PROC2 PROC3 PROC4 PROC5 PROC6 PROC7 PROC8 DIV      PRIME YEAR DSCYR check AGE  RACE       HISPAN
       1:              9851                                             0 COMMERCIAL 2012  2012 FALSE  43 White Non-Hispanic
       2: 27949 V5865  9851                                             0 COMMERCIAL 2012  2012 FALSE  43 White Non-Hispanic
       3:  5533 V1749  4516                                             0 COMMERCIAL 2013  2013 FALSE  44 White Non-Hispanic
       4:                                                               0 COMMERCIAL 2013  2013 FALSE  44 White Non-Hispanic
       5:                                                                 COMMERCIAL 2015  2015 FALSE  46 White Non-Hispanic
      ---                                                                                                                   
18057024:              5011  8741  8801  8876                           0 COMMERCIAL 2014  2014 FALSE  69 White Non-Hispanic
18057025:  1748  V140  8741  9905  8801  8877                             COMMERCIAL 2015  2015 FALSE  69 White Non-Hispanic
18057026: V7284         806                                             0   medicare 2010  2010 FALSE  84 White Non-Hispanic
18057027:                                                               0   medicare 2013  2013 FALSE  87 White     Hispanic
18057028:                                                                   medicare 2015  2015 FALSE  90 White     Hispanic

> midas15[, DIV := NULL]
            Patient_ID    patbdte NEWDTD SEX CAUSE ADM_TYPE     ADMDAT    DSCHDAT HOSP STATUS   DX1   DX2   DX3   DX4   DX5   DX6   DX7
       1: 'CCISAF01313 1968-07-26   <NA>   F              3 2012-01-31 2012-01-31  001      1  5920  4019  3051  V180                  
       2: 'CCISAF01313 1968-07-26   <NA>   F              3 2012-04-11 2012-04-11  001      1  5920  4011  3051  3004 37900  4476  3888
       3: 'CCISAF01313 1968-07-26   <NA>   F              1 2013-05-03 2013-05-05  001      1 53541  5180  2800 37900  3051  4019  4476
       4: 'CCISAF01313 1968-07-26   <NA>   F              1 2013-05-06 2013-05-08  001      1  4239 37909 53540  4476  4019  V180 V1749
       5: 'CCISAF01313 1968-07-26   <NA>   F              3 2015-05-22 2015-05-22   10      1   470  4780  4732  4730  4019  4478 V5869
      ---                                                                                                                              
18057024: ZIRGANF08030 1945-10-27   <NA>   F              1 2014-12-01 2014-12-05  070      1  1977 49390 32723  4019  V103 V1582      
18057025: ZIRGANF08030 1945-10-27   <NA>   F              1 2015-02-09 2015-02-19   00      6 41519 28411  1977  5119 49121 49122  1985
18057026: ZUGAAMF02252 1925-10-31   <NA>   F              3 2010-04-16 2010-04-16  009      1  7172 71749 71536 40290  7176 72700  7177
18057027: ZUGAAMF02252 1925-10-31   <NA>   F              2 2013-06-18 2013-06-18  009      1  5990  4019                              
18057028: ZUGAAMF02252 1925-10-31   <NA>   F              2 2015-11-25 2015-11-25   90      1  8461 71945  7202  4019 45989  7246      
            DX8   DX9 PROC1 PROC2 PROC3 PROC4 PROC5 PROC6 PROC7 PROC8      PRIME YEAR DSCYR check AGE  RACE       HISPAN
       1:              9851                                           COMMERCIAL 2012  2012 FALSE  43 White Non-Hispanic
       2: 27949 V5865  9851                                           COMMERCIAL 2012  2012 FALSE  43 White Non-Hispanic
       3:  5533 V1749  4516                                           COMMERCIAL 2013  2013 FALSE  44 White Non-Hispanic
       4:                                                             COMMERCIAL 2013  2013 FALSE  44 White Non-Hispanic
       5:                                                             COMMERCIAL 2015  2015 FALSE  46 White Non-Hispanic
      ---                                                                                                               
18057024:              5011  8741  8801  8876                         COMMERCIAL 2014  2014 FALSE  69 White Non-Hispanic
18057025:  1748  V140  8741  9905  8801  8877                         COMMERCIAL 2015  2015 FALSE  69 White Non-Hispanic
18057026: V7284         806                                             medicare 2010  2010 FALSE  84 White Non-Hispanic
18057027:                                                               medicare 2013  2013 FALSE  87 White     Hispanic
18057028:                                                               medicare 2015  2015 FALSE  90 White     Hispanic

> midas15[, STATUS := NULL]
            Patient_ID    patbdte NEWDTD SEX CAUSE ADM_TYPE     ADMDAT    DSCHDAT HOSP   DX1   DX2   DX3   DX4   DX5   DX6   DX7   DX8
       1: 'CCISAF01313 1968-07-26   <NA>   F              3 2012-01-31 2012-01-31  001  5920  4019  3051  V180                        
       2: 'CCISAF01313 1968-07-26   <NA>   F              3 2012-04-11 2012-04-11  001  5920  4011  3051  3004 37900  4476  3888 27949
       3: 'CCISAF01313 1968-07-26   <NA>   F              1 2013-05-03 2013-05-05  001 53541  5180  2800 37900  3051  4019  4476  5533
       4: 'CCISAF01313 1968-07-26   <NA>   F              1 2013-05-06 2013-05-08  001  4239 37909 53540  4476  4019  V180 V1749      
       5: 'CCISAF01313 1968-07-26   <NA>   F              3 2015-05-22 2015-05-22   10   470  4780  4732  4730  4019  4478 V5869      
      ---                                                                                                                             
18057024: ZIRGANF08030 1945-10-27   <NA>   F              1 2014-12-01 2014-12-05  070  1977 49390 32723  4019  V103 V1582            
18057025: ZIRGANF08030 1945-10-27   <NA>   F              1 2015-02-09 2015-02-19   00 41519 28411  1977  5119 49121 49122  1985  1748
18057026: ZUGAAMF02252 1925-10-31   <NA>   F              3 2010-04-16 2010-04-16  009  7172 71749 71536 40290  7176 72700  7177 V7284
18057027: ZUGAAMF02252 1925-10-31   <NA>   F              2 2013-06-18 2013-06-18  009  5990  4019                                    
18057028: ZUGAAMF02252 1925-10-31   <NA>   F              2 2015-11-25 2015-11-25   90  8461 71945  7202  4019 45989  7246            
            DX9 PROC1 PROC2 PROC3 PROC4 PROC5 PROC6 PROC7 PROC8      PRIME YEAR DSCYR check AGE  RACE       HISPAN
       1:        9851                                           COMMERCIAL 2012  2012 FALSE  43 White Non-Hispanic
       2: V5865  9851                                           COMMERCIAL 2012  2012 FALSE  43 White Non-Hispanic
       3: V1749  4516                                           COMMERCIAL 2013  2013 FALSE  44 White Non-Hispanic
       4:                                                       COMMERCIAL 2013  2013 FALSE  44 White Non-Hispanic
       5:                                                       COMMERCIAL 2015  2015 FALSE  46 White Non-Hispanic
      ---                                                                                                         
18057024:        5011  8741  8801  8876                         COMMERCIAL 2014  2014 FALSE  69 White Non-Hispanic
18057025:  V140  8741  9905  8801  8877                         COMMERCIAL 2015  2015 FALSE  69 White Non-Hispanic
18057026:         806                                             medicare 2010  2010 FALSE  84 White Non-Hispanic
18057027:                                                         medicare 2013  2013 FALSE  87 White     Hispanic
18057028:                                                         medicare 2015  2015 FALSE  90 White     Hispanic

> gc()
            used   (Mb) gc trigger   (Mb)  max used   (Mb)
Ncells   5150098  275.1   11011661  588.1   5690330  303.9
Vcells 565310161 4313.0  830247765 6334.3 638400430 4870.7

> # Number of patients
> length(unique(midas15$Patient_ID))
[1] 4446438

> # 18,057,028 records of 4,446,438 patients
> 
> summary(midas15)
  Patient_ID           patbdte               NEWDTD           SEX            CAUSE             ADM_TYPE             ADMDAT          
 Length:18057028    Min.   :1880-01-01   Min.   :1995-01-01   F:9700483   Length:18057028    Length:18057028    Min.   :1995-01-01  
 Class :character   1st Qu.:1927-02-09   1st Qu.:2003-12-22   M:8356545   Class :character   Class :character   1st Qu.:2002-12-13  
 Mode  :character   Median :1939-09-24   Median :2009-01-28               Mode  :character   Mode  :character   Median :2008-11-13  
                    Mean   :1941-02-17   Mean   :2008-02-26                                                     Mean   :2007-07-30  
                    3rd Qu.:1954-02-01   3rd Qu.:2012-11-18                                                     3rd Qu.:2012-07-14  
                    Max.   :1997-12-19   Max.   :2015-12-31                                                     Max.   :2015-12-31  
                                         NA's   :11182053                                                                           
    DSCHDAT               HOSP               DX1                DX2                DX3                DX4                DX5           
 Min.   :1995-01-01   Length:18057028    Length:18057028    Length:18057028    Length:18057028    Length:18057028    Length:18057028   
 1st Qu.:2002-12-19   Class :character   Class :character   Class :character   Class :character   Class :character   Class :character  
 Median :2008-11-17   Mode  :character   Mode  :character   Mode  :character   Mode  :character   Mode  :character   Mode  :character  
 Mean   :2007-08-03                                                                                                                    
 3rd Qu.:2012-07-17                                                                                                                    
 Max.   :2016-02-09                                                                                                                    
                                                                                                                                       
     DX6                DX7                DX8                DX9               PROC1              PROC2              PROC3          
 Length:18057028    Length:18057028    Length:18057028    Length:18057028    Length:18057028    Length:18057028    Length:18057028   
 Class :character   Class :character   Class :character   Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                                                                                     
                                                                                                                                     
                                                                                                                                     
                                                                                                                                     
    PROC4              PROC5              PROC6              PROC7              PROC8                               PRIME        
 Length:18057028    Length:18057028    Length:18057028    Length:18057028    Length:18057028    medicare               :9499722  
 Class :character   Class :character   Class :character   Class :character   Class :character   COMMERCIAL             :7123504  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character   Mode  :character   medicaid/self-pay/other:1433802  
                                                                                                                                 
                                                                                                                                 
                                                                                                                                 
                                                                                                                                 
     YEAR              DSCYR             check               AGE            RACE                   HISPAN        
 Length:18057028    Length:18057028    Mode :logical    Min.   : 18.00   White:13087078   Hispanic    : 1697530  
 Class :character   Class :character   FALSE:18057028   1st Qu.: 54.00   Black: 3070308   Non-Hispanic:14682079  
 Mode  :character   Mode  :character                    Median : 68.00   Other: 1899642   Unknown     : 1677419  
                                                        Mean   : 65.94                                           
                                                        3rd Qu.: 79.00                                           
                                                        Max.   :124.00                                           
                                                                                                                 

> # Exclude Emergency/Other Outpatient---- 
> # 1 = inpatient
> # 2 = ER outpatient
> # 3 = same day surgery (SDS) outpatient
> # 4 = other outpatient .... [TRUNCATED] 

> kable(format(t1, big.mark = ","))


|     |1       |2       |3       |4      |5       |
|:----|:-------|:-------|:-------|:------|:-------|
|1995 |445,427 |0       |0       |0      |51,019  |
|1996 |462,937 |0       |0       |0      |60,475  |
|1997 |469,139 |0       |0       |0      |73,844  |
|1998 |480,809 |0       |0       |0      |83,075  |
|1999 |487,342 |0       |0       |0      |86,042  |
|2000 |506,849 |0       |0       |0      |90,692  |
|2001 |512,121 |0       |0       |0      |94,236  |
|2002 |538,553 |0       |0       |0      |99,614  |
|2003 |567,841 |0       |0       |0      |104,101 |
|2004 |565,937 |0       |0       |0      |124,838 |
|2005 |577,161 |0       |0       |0      |127,869 |
|2006 |588,474 |0       |0       |0      |126,024 |
|2007 |588,841 |71      |0       |7      |129,072 |
|2008 |605,433 |367,436 |78,367  |79,698 |0       |
|2009 |605,830 |418,646 |95,288  |78,484 |0       |
|2010 |599,233 |456,183 |102,948 |83,270 |0       |
|2011 |574,068 |478,511 |105,419 |78,619 |0       |
|2012 |568,398 |532,918 |98,152  |84,347 |0       |
|2013 |550,449 |540,387 |97,425  |87,278 |0       |
|2014 |541,051 |562,339 |102,041 |92,963 |0       |
|2015 |530,759 |614,445 |106,091 |98,142 |0       |

>   # |     |1       |2       |3       |4      |5       |
>   # |:----|:-------|:-------|:-------|:------|:-------|
>   # |1995 |445,427 |0       |0   .... [TRUNCATED] 

> table(midas15$ADM_TYPE)

       1        2        4        5 
11366652  3970936   682808  1250901 

> midas15[, ADM_TYPE := NULL]
            Patient_ID    patbdte NEWDTD SEX CAUSE     ADMDAT    DSCHDAT HOSP   DX1   DX2   DX3   DX4   DX5   DX6   DX7  DX8   DX9 PROC1
       1: 'CCISAF01313 1968-07-26   <NA>   F       2013-05-03 2013-05-05  001 53541  5180  2800 37900  3051  4019  4476 5533 V1749  4516
       2: 'CCISAF01313 1968-07-26   <NA>   F       2013-05-06 2013-05-08  001  4239 37909 53540  4476  4019  V180 V1749                 
       3: 'HRAFRM12292 1944-06-06   <NA>   M       2000-02-16 2000-02-16  012  2113 56210  4556  4019  2724   311                   4542
       4: 'HRAFRM12292 1944-06-06   <NA>   M       2009-07-07 2009-07-07  006  7804  4019                                               
       5: 'HRAFRM12292 1944-06-06   <NA>   M       2009-12-29 2009-12-29  001  7804  4019  2720   311 V5866                             
      ---                                                                                                                               
17271293: ZIKIBEF09202 1972-08-17   <NA>   F       2012-07-16 2012-07-16  001 78605 78659  4019  V143                               9394
17271294: ZIRGANF08030 1945-10-27   <NA>   F       2014-12-01 2014-12-05  070  1977 49390 32723  4019  V103 V1582                   5011
17271295: ZIRGANF08030 1945-10-27   <NA>   F       2015-02-09 2015-02-19   00 41519 28411  1977  5119 49121 49122  1985 1748  V140  8741
17271296: ZUGAAMF02252 1925-10-31   <NA>   F       2013-06-18 2013-06-18  009  5990  4019                                               
17271297: ZUGAAMF02252 1925-10-31   <NA>   F       2015-11-25 2015-11-25   90  8461 71945  7202  4019 45989  7246                       
          PROC2 PROC3 PROC4 PROC5 PROC6 PROC7 PROC8      PRIME YEAR DSCYR check AGE  RACE       HISPAN
       1:                                           COMMERCIAL 2013  2013 FALSE  44 White Non-Hispanic
       2:                                           COMMERCIAL 2013  2013 FALSE  44 White Non-Hispanic
       3:  4824                                       medicare 2000  2000 FALSE  55 White Non-Hispanic
       4:                                             medicare 2009  2009 FALSE  65 White Non-Hispanic
       5:                                             medicare 2009  2009 FALSE  65 White Non-Hispanic
      ---                                                                                             
17271293:                                           COMMERCIAL 2012  2012 FALSE  39 White Non-Hispanic
17271294:  8741  8801  8876                         COMMERCIAL 2014  2014 FALSE  69 White Non-Hispanic
17271295:  9905  8801  8877                         COMMERCIAL 2015  2015 FALSE  69 White Non-Hispanic
17271296:                                             medicare 2013  2013 FALSE  87 White     Hispanic
17271297:                                             medicare 2015  2015 FALSE  90 White     Hispanic

> gc()
            used   (Mb) gc trigger    (Mb)   max used    (Mb)
Ncells   5031647  268.8   11011661   588.1    5690330   303.9
Vcells 523818268 3996.5 1451392836 11073.3 1332928301 10169.5

> # 17,271,297 records left
> 
> length(unique(midas15$Patient_ID))
[1] 4310486

> # 4,310,486 patients
> 
> unique(midas15$HOSP)
  [1] "001" "012" "006" "130" "058" "008" "50"  "069" "10"  "037" "119" "048" "002" "078" "083" "013" "015" "108" "052" "041" "076" "60" 
 [23] "040" "096" "003" "118" "016" "00"  "051" "060" "093" "084" "30"  "038" "025" "024" "90"  "049" "045" "009" "054" "063" "80"  "074"
 [45] "073" "89"  "070" "064" "20"  "067" "115" "018" "027" "70"  "050" "40"  "031" "019" "105" "077" "020" "047" "011" "017" "111" "113"
 [67] "072" "116" "22"  "075" "057" "088" "022" "028" "112" "110" "120" "026" "039" "91"  "010" "029" "042" "032" "014" "02"  "086" "090"
 [89] "092" "01"  "044" "005" "034" "92"  "043" "63"  "062" "24"  "021" "41"  "061" "081" "056" "087" "61"  "091" "62"  "21"  "42"  "23" 
[111] "71"  "036" "2E3" "81"  "82" 

> length(unique(midas15$HOSP))
[1] 115

> # 115 hospitals
> 
> range(midas15$ADMDAT)
[1] "1995-01-01" "2015-12-31"

> # "1995-01-01" "2015-12-31"
> 
> # Exclusions----
> # Separate diagnostic codes (DX1:DX9)----
> dx <- midas15[, DX1:DX9]

> dx.1.3 <- data.table(apply(dx,
+                            2,
+                            substr,
+                            start = 1,
+        .... [TRUNCATED] 

> # Cancers----
> # See "C:\Users\ds752\Documents\svn_local\trunk\Cardiovascular\Jen Wellings HF After MI\ICD-9-CM Cancer Codes Exclude.txt" for detai .... [TRUNCATED] 

> table(cancer)
cancer
   FALSE     TRUE 
15462575  1808722 

> # FALSE     TRUE 
> # 15462575  1808722 
> length(unique(midas15$Patient_ID[cancer]))
[1] 946835

> # 946,835 patients
> 
> # HIV----
> hiv <- rowSums(apply(X = dx,
+                      MARGIN = 2, 
+                      FUN = function(a) {
+    .... [TRUNCATED] 

> table(hiv)
hiv
   FALSE     TRUE 
17198453    72844 

> # FALSE     TRUE 
> # 17198453    72844
> length(unique(midas15$Patient_ID[hiv]))
[1] 23718

> # 23,718 patients
> 
> tmp <- data.table(midas15[, c("Patient_ID", 
+                               "RACE",
+                               "SEX", 
 .... [TRUNCATED] 

> tmp <- tmp[hiv, ]

> tmp[, N := 1:.N,
+     by = Patient_ID]
         Patient_ID  RACE SEX       HISPAN  hiv N
    1: .DDSSEM07101 Black   M Non-Hispanic TRUE 1
    2: .DDSSEM07101 Black   M Non-Hispanic TRUE 2
    3: .DDSSEM07101 Black   M Non-Hispanic TRUE 3
    4: .DDSSEM07101 Black   M Non-Hispanic TRUE 4
    5: .DDSSEM07101 Black   M Non-Hispanic TRUE 5
   ---                                           
72840: WIJRJOM07272 Black   M Non-Hispanic TRUE 1
72841: WIJRJOM07272 Black   M Non-Hispanic TRUE 2
72842: WIJRJOM07272 Black   M Non-Hispanic TRUE 3
72843: WIJRJOM07272 Black   M Non-Hispanic TRUE 4
72844: WIJRJOM07272 Black   M Non-Hispanic TRUE 5

> tmp <- tmp[N == 1, ]

> tmp <- data.table(table(hiv = tmp$hiv,
+                         race = tmp$RACE,
+                         sex = tmp$SEX,
+                         .... [TRUNCATED] 

> tmp$pct <- round(100*tmp$N/sum(tmp$N), 1)

> kable(tmp)


|race  |sex |hisp         |    N|  pct|
|:-----|:---|:------------|----:|----:|
|White |F   |Hispanic     |  715|  3.0|
|Black |F   |Hispanic     |  142|  0.6|
|Other |F   |Hispanic     |  353|  1.5|
|White |M   |Hispanic     | 1386|  5.8|
|Black |M   |Hispanic     |  235|  1.0|
|Other |M   |Hispanic     |  727|  3.1|
|White |F   |Non-Hispanic | 1301|  5.5|
|Black |F   |Non-Hispanic | 5319| 22.4|
|Other |F   |Non-Hispanic |  287|  1.2|
|White |M   |Non-Hispanic | 3209| 13.5|
|Black |M   |Non-Hispanic | 7479| 31.5|
|Other |M   |Non-Hispanic |  555|  2.3|
|White |F   |Unknown      |  137|  0.6|
|Black |F   |Unknown      |  417|  1.8|
|Other |F   |Unknown      |  107|  0.5|
|White |M   |Unknown      |  429|  1.8|
|Black |M   |Unknown      |  664|  2.8|
|Other |M   |Unknown      |  256|  1.1|

>   # |race  |sex |hisp         |    N|  pct|
>   # |:-----|:---|:------------|----:|----:|
>   # |White |F   |Hispanic     |  715|  3.0|
>   # |Black .... [TRUNCATED] 

> rec.keep <- which(!(midas15$Patient_ID %in% id.rm))

> midas15 <- midas15[rec.keep, ]

> rm(dx.1.3,
+    cancer,
+    hiv,
+    id.rm,
+    rec.keep)

> gc()
            used   (Mb) gc trigger    (Mb)   max used    (Mb)
Ncells   4080183  218.0   11011661   588.1    5690330   303.9
Vcells 504613018 3849.9 1393401123 10630.9 1741747569 13288.5

> # Load ICD-9 codes----
> # NOTE: this file is copied form the ankylosing spondylitis project
> l1 <- fread("data/midas.hf_icd9_codes_2019-05-10.csv" .... [TRUNCATED] 

> unique(l1$comorb)
 [1] "stroke" "tia"    "ami"    "hf"     "af"     "osa"    "anemia" "ckd"    "diab"   "hyper"  "lipid"  "copd"   "park"  

> # Heart failure----
> kable(l1[comorb == "hf",
+          c("code",
+            "long_desc")])


|code  |long_desc                                                      |
|:-----|:--------------------------------------------------------------|
|4280  |Congestive heart failure, unspecified                          |
|4281  |Left heart failure                                             |
|42820 |Systolic heart failure, unspecified                            |
|42821 |Acute systolic heart failure                                   |
|42822 |Chronic systolic heart failure                                 |
|42823 |Acute on chronic systolic heart failure                        |
|42830 |Diastolic heart failure, unspecified                           |
|42831 |Acute diastolic heart failure                                  |
|42832 |Chronic diastolic heart failure                                |
|42833 |Acute on chronic diastolic heart failure                       |
|42840 |Combined systolic and diastolic heart failure, unspecified     |
|42841 |Acute combined systolic and diastolic heart failure            |
|42842 |Chronic combined systolic and diastolic heart failure          |
|42843 |Acute on chronic combined systolic and diastolic heart failure |
|4289  |Heart failure, unspecified                                     |

>   # |code  |long_desc                                                      |
>   # |:-----|:-------------------------------------------------------- .... [TRUNCATED] 

> # Separate diagnostic codes (DX1:DX9)
> dx <- data.table(Record_ID = 1:nrow(midas15),
+                  Patient_ID = midas15$Patient_ID,
+          .... [TRUNCATED] 

> dx
          Record_ID   Patient_ID   DX1   DX2   DX3   DX4   DX5   DX6   DX7   DX8   DX9
       1:         1 'CCISAF01313 53541  5180  2800 37900  3051  4019  4476  5533 V1749
       2:         2 'CCISAF01313  4239 37909 53540  4476  4019  V180 V1749            
       3:         3 'RNTKAF08212 53081 78039 78659  4019  2724                        
       4:         4 'RNTKAF08212 38630 78039  4019  2724 73300                        
       5:         5 'RNTKAF08212  8472  4019 34590                                    
      ---                                                                             
11413514:  11413514 ZEVECAM11291 25070 25080 70715  4019  2720 44381 V1251 V5861      
11413515:  11413515 ZEVECAM11291  3659 25000  4019  5939 V4589 V5867 V5869            
11413516:  11413516 ZIKIBEF09202 78605 78659  4019  V143                              
11413517:  11413517 ZUGAAMF02252  5990  4019                                          
11413518:  11413518 ZUGAAMF02252  8461 71945  7202  4019 45989  7246                  

> # Number of patients with each condition----
> dtt <- list()

> for(i in 1:9){
+   dtt[[i]] <- icd9_comorbid(x = dx,
+                             map = l2[c("hf")],
+                             visit_name = "Pa ..." ... [TRUNCATED] 

> # Patients with HF admissons (DX1)----
> hf.dx1 <- data.table(Patient_ID = rownames(dtt[[1]]),
+                      dtt[[1]])

> hf.dx1
           Patient_ID    hf
      1: 'CCISAF01313 FALSE
      2: 'RNTKAF08212 FALSE
      3: -ACHMAM12030  TRUE
      4: .AANEVF05152 FALSE
      5: .AGOLOF02252 FALSE
     ---                   
3344456: ZAASMAF02020 FALSE
3344457: ZALAMAF05232 FALSE
3344458: ZEVECAM11291 FALSE
3344459: ZIKIBEF09202 FALSE
3344460: ZUGAAMF02252 FALSE

> kable(format(data.frame(N_Patients = sum(hf.dx1$hf)),
+              big.mark = ","))


|N_Patients |
|:----------|
|240,851    |

>   # |   |N_Patients |
>   # |:--|:----------|
>   # |hf |240,851    |
> 
> # Patients with HF diagnoses (DX1-9)----
> dt2 <- data.table(apply(Reduce .... [TRUNCATED] 

> dt2$Patient_ID <- rownames(dtt[[1]])

> kable(format(data.frame(N_Patients = colSums(dt2[, 1])),
+              big.mark = ","))


|   |N_Patients |
|:--|:----------|
|hf |593,581    |

>   # |   |N_Patients |
>   # |:--|:----------|
>   # |hf |593,581    |
> 
> # Keep only the patients with HF admissions----
> id.keep <- unique(hf.dx .... [TRUNCATED] 

> dt1 <- midas15[Patient_ID %in% id.keep, ]

> setkey(dt1,
+        Patient_ID,
+        ADMDAT)

> dt1
           Patient_ID    patbdte     NEWDTD SEX CAUSE     ADMDAT    DSCHDAT HOSP   DX1   DX2   DX3   DX4   DX5   DX6   DX7   DX8   DX9
      1: -ACHMAM12030 1925-12-18 2010-03-13   M  J189 2002-09-16 2002-09-16  001 40391 28521   412 25000 41401                        
      2: -ACHMAM12030 1925-12-18 2010-03-13   M  J189 2002-10-14 2002-10-22  001 41091  4280 40391  V451 41401   412  5839  V173 25000
      3: -ACHMAM12030 1925-12-18 2010-03-13   M  J189 2002-12-03 2002-12-03  001 36613 40391  V451 25001                              
      4: -ACHMAM12030 1925-12-18 2010-03-13   M  J189 2003-01-26 2003-02-02  001 41091  4280 40391  V451  2767 25000  2749   412 V4582
      5: -ACHMAM12030 1925-12-18 2010-03-13   M  J189 2004-01-28 2004-02-04  001 99673 40391 41071  2767 41401  4439 25000 60000  2720
     ---                                                                                                                              
2146895: TUIAGUM01171 1958-03-07       <NA>   M       2015-07-22 2015-07-22   40 78659 41400  2724 40391  5856  4139  4439 25000 27800
2146896: TUIAGUM01171 1958-03-07       <NA>   M       2015-12-04 2015-12-05   00  2767 25000 41401 V4581  4280 40391  5856 V4511  2720
2146897: WITTMAF07141 1971-09-15       <NA>   F       2015-03-21 2015-03-21   00 49390  4019                                          
2146898: WITTMAF07141 1971-09-15       <NA>   F       2015-09-19 2015-09-19   00  4280                                                
2146899: WITTMAF07141 1971-09-15       <NA>   F       2015-10-16 2015-10-16   40 41401  4168                                          
         PROC1 PROC2 PROC3 PROC4 PROC5 PROC6 PROC7 PROC8      PRIME YEAR DSCYR check AGE  RACE       HISPAN
      1:  3927                                             medicare 2002  2002 FALSE  76 White      Unknown
      2:  3601  3606  3722  8856  8853  9920  3953         medicare 2002  2002 FALSE  76 White Non-Hispanic
      3:  1341  1371                                       medicare 2002  2002 FALSE  76 White Non-Hispanic
      4:  3601  3606  3722  8856  3895  3995               medicare 2003  2003 FALSE  77 White Non-Hispanic
      5:  3949  3601  3607  3722  8856  3895  3895  3995   medicare 2004  2004 FALSE  78 White Non-Hispanic
     ---                                                                                                   
2146895:                                                   medicare 2015  2015 FALSE  57 Other     Hispanic
2146896:                                                 COMMERCIAL 2015  2015 FALSE  57 Other Non-Hispanic
2146897:  9394                                           COMMERCIAL 2015  2015 FALSE  43 Black Non-Hispanic
2146898:  9929                                           COMMERCIAL 2015  2015 FALSE  44 Black Non-Hispanic
2146899:                                                 COMMERCIAL 2015  2015 FALSE  44 Black Non-Hispanic

> dt1$Record_ID <- 1:nrow(dt1)

> # Save datasets----
> attr(dt1, "created") <- date()

> attr(dt1, c("description")) <- "Source: 'midas15_hf_data_v1.R'."

> attributes(dt1)
$sorted
[1] "Patient_ID" "ADMDAT"    

$row.names
   [1]    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26
  [27]   27   28   29   30   31   32   33   34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49   50   51   52
  [53]   53   54   55   56   57   58   59   60   61   62   63   64   65   66   67   68   69   70   71   72   73   74   75   76   77   78
  [79]   79   80   81   82   83   84   85   86   87   88   89   90   91   92   93   94   95   96   97   98   99  100  101  102  103  104
 [105]  105  106  107  108  109  110  111  112  113  114  115  116  117  118  119  120  121  122  123  124  125  126  127  128  129  130
 [131]  131  132  133  134  135  136  137  138  139  140  141  142  143  144  145  146  147  148  149  150  151  152  153  154  155  156
 [157]  157  158  159  160  161  162  163  164  165  166  167  168  169  170  171  172  173  174  175  176  177  178  179  180  181  182
 [183]  183  184  185  186  187  188  189  190  191  192  193  194  195  196  197  198  199  200  201  202  203  204  205  206  207  208
 [209]  209  210  211  212  213  214  215  216  217  218  219  220  221  222  223  224  225  226  227  228  229  230  231  232  233  234
 [235]  235  236  237  238  239  240  241  242  243  244  245  246  247  248  249  250  251  252  253  254  255  256  257  258  259  260
 [261]  261  262  263  264  265  266  267  268  269  270  271  272  273  274  275  276  277  278  279  280  281  282  283  284  285  286
 [287]  287  288  289  290  291  292  293  294  295  296  297  298  299  300  301  302  303  304  305  306  307  308  309  310  311  312
 [313]  313  314  315  316  317  318  319  320  321  322  323  324  325  326  327  328  329  330  331  332  333  334  335  336  337  338
 [339]  339  340  341  342  343  344  345  346  347  348  349  350  351  352  353  354  355  356  357  358  359  360  361  362  363  364
 [365]  365  366  367  368  369  370  371  372  373  374  375  376  377  378  379  380  381  382  383  384  385  386  387  388  389  390
 [391]  391  392  393  394  395  396  397  398  399  400  401  402  403  404  405  406  407  408  409  410  411  412  413  414  415  416
 [417]  417  418  419  420  421  422  423  424  425  426  427  428  429  430  431  432  433  434  435  436  437  438  439  440  441  442
 [443]  443  444  445  446  447  448  449  450  451  452  453  454  455  456  457  458  459  460  461  462  463  464  465  466  467  468
 [469]  469  470  471  472  473  474  475  476  477  478  479  480  481  482  483  484  485  486  487  488  489  490  491  492  493  494
 [495]  495  496  497  498  499  500  501  502  503  504  505  506  507  508  509  510  511  512  513  514  515  516  517  518  519  520
 [521]  521  522  523  524  525  526  527  528  529  530  531  532  533  534  535  536  537  538  539  540  541  542  543  544  545  546
 [547]  547  548  549  550  551  552  553  554  555  556  557  558  559  560  561  562  563  564  565  566  567  568  569  570  571  572
 [573]  573  574  575  576  577  578  579  580  581  582  583  584  585  586  587  588  589  590  591  592  593  594  595  596  597  598
 [599]  599  600  601  602  603  604  605  606  607  608  609  610  611  612  613  614  615  616  617  618  619  620  621  622  623  624
 [625]  625  626  627  628  629  630  631  632  633  634  635  636  637  638  639  640  641  642  643  644  645  646  647  648  649  650
 [651]  651  652  653  654  655  656  657  658  659  660  661  662  663  664  665  666  667  668  669  670  671  672  673  674  675  676
 [677]  677  678  679  680  681  682  683  684  685  686  687  688  689  690  691  692  693  694  695  696  697  698  699  700  701  702
 [703]  703  704  705  706  707  708  709  710  711  712  713  714  715  716  717  718  719  720  721  722  723  724  725  726  727  728
 [729]  729  730  731  732  733  734  735  736  737  738  739  740  741  742  743  744  745  746  747  748  749  750  751  752  753  754
 [755]  755  756  757  758  759  760  761  762  763  764  765  766  767  768  769  770  771  772  773  774  775  776  777  778  779  780
 [781]  781  782  783  784  785  786  787  788  789  790  791  792  793  794  795  796  797  798  799  800  801  802  803  804  805  806
 [807]  807  808  809  810  811  812  813  814  815  816  817  818  819  820  821  822  823  824  825  826  827  828  829  830  831  832
 [833]  833  834  835  836  837  838  839  840  841  842  843  844  845  846  847  848  849  850  851  852  853  854  855  856  857  858
 [859]  859  860  861  862  863  864  865  866  867  868  869  870  871  872  873  874  875  876  877  878  879  880  881  882  883  884
 [885]  885  886  887  888  889  890  891  892  893  894  895  896  897  898  899  900  901  902  903  904  905  906  907  908  909  910
 [911]  911  912  913  914  915  916  917  918  919  920  921  922  923  924  925  926  927  928  929  930  931  932  933  934  935  936
 [937]  937  938  939  940  941  942  943  944  945  946  947  948  949  950  951  952  953  954  955  956  957  958  959  960  961  962
 [963]  963  964  965  966  967  968  969  970  971  972  973  974  975  976  977  978  979  980  981  982  983  984  985  986  987  988
 [989]  989  990  991  992  993  994  995  996  997  998  999 1000
 [ reached getOption("max.print") -- omitted 2145899 entries ]

$.internal.selfref
<pointer: 0x0000000000101ef0>

$class
[1] "data.table" "data.frame"

$names
 [1] "Patient_ID" "patbdte"    "NEWDTD"     "SEX"        "CAUSE"      "ADMDAT"     "DSCHDAT"    "HOSP"       "DX1"        "DX2"       
[11] "DX3"        "DX4"        "DX5"        "DX6"        "DX7"        "DX8"        "DX9"        "PROC1"      "PROC2"      "PROC3"     
[21] "PROC4"      "PROC5"      "PROC6"      "PROC7"      "PROC8"      "PRIME"      "YEAR"       "DSCYR"      "check"      "AGE"       
[31] "RACE"       "HISPAN"     "Record_ID" 

$created
[1] "Sat May 11 20:08:49 2019"

$description
[1] "Source: 'midas15_hf_data_v1.R'."


> save(dt1,
+      file = "data/dt1.RData")

> attr(l2, "created") <- date()

> attr(l2, c("description")) <- "Source: 'midas15_hf_data_v1.R'."

> attributes(l2)
$names
 [1] "af"     "ami"    "anemia" "ckd"    "copd"   "diab"   "hf"     "hyper"  "lipid"  "osa"    "park"   "stroke" "tia"   

$class
[1] "comorbidity_map" "list"           

$created
[1] "Sat May 11 20:09:24 2019"

$description
[1] "Source: 'midas15_hf_data_v1.R'."


> save(l2,
+      file = "data/l2.RData")

> # Clear memory
> rm(list = setdiff(ls(), 
+                   c("dt1",
+                     "l2")))

> gc()
           used  (Mb) gc trigger   (Mb)   max used    (Mb)
Ncells   978270  52.3    8809329  470.5   11011661   588.1
Vcells 87476143 667.4 1114720899 8504.7 1741747569 13288.5

> # Part II----
> # # Reload HF data----
> # load("data/dt1.RData")
> # load("data/l2.RData")
> 
> # Separate diagnostic codes (DX1:DX9)
> dx <- data. .... [TRUNCATED] 

> dx
         Record_ID   Patient_ID   DX1   DX2   DX3   DX4   DX5   DX6   DX7   DX8   DX9
      1:         1 -ACHMAM12030 40391 28521   412 25000 41401                        
      2:         2 -ACHMAM12030 41091  4280 40391  V451 41401   412  5839  V173 25000
      3:         3 -ACHMAM12030 36613 40391  V451 25001                              
      4:         4 -ACHMAM12030 41091  4280 40391  V451  2767 25000  2749   412 V4582
      5:         5 -ACHMAM12030 99673 40391 41071  2767 41401  4439 25000 60000  2720
     ---                                                                             
2146895:   2146895 TUIAGUM01171 78659 41400  2724 40391  5856  4139  4439 25000 27800
2146896:   2146896 TUIAGUM01171  2767 25000 41401 V4581  4280 40391  5856 V4511  2720
2146897:   2146897 WITTMAF07141 49390  4019                                          
2146898:   2146898 WITTMAF07141  4280                                                
2146899:   2146899 WITTMAF07141 41401  4168                                          

> # Records with each condition----
> dtt <- list()

> for(i in 1:9){
+   dtt[[i]] <- icd9_comorbid(x = dx,
+                             map = l2,
+                             visit_name = "Record_ID", .... [TRUNCATED] 

> # Patients with HF admissons (DX1)----
> dt.dx1 <- data.table(Record_ID = as.numeric(rownames(dtt[[1]])),
+                      dtt[[1]])

> dt.dx1
         Record_ID    af   ami anemia   ckd  copd  diab    hf hyper lipid   osa  park stroke   tia
      1:         1 FALSE FALSE  FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE
      2:         2 FALSE  TRUE  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE FALSE
      3:         3 FALSE FALSE  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE FALSE
      4:         4 FALSE  TRUE  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE FALSE
      5:         5 FALSE FALSE  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE FALSE
     ---                                                                                          
2146895:   2146895 FALSE FALSE  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE FALSE
2146896:   2146896 FALSE FALSE  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE FALSE
2146897:   2146897 FALSE FALSE  FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE FALSE
2146898:   2146898 FALSE FALSE  FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  FALSE FALSE
2146899:   2146899 FALSE FALSE  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE FALSE

> summary(dt.dx1)
   Record_ID           af             ami            anemia           ckd             copd            diab             hf         
 Min.   :      1   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 1st Qu.: 536726   FALSE:2092121   FALSE:2068961   FALSE:2136313   FALSE:2145123   FALSE:2073996   FALSE:2087038   FALSE:1673908  
 Median :1073450   TRUE :54778     TRUE :77938     TRUE :10586     TRUE :1776      TRUE :72903     TRUE :59861     TRUE :472991   
 Mean   :1073450                                                                                                                  
 3rd Qu.:1610175                                                                                                                  
 Max.   :2146899                                                                                                                  
   hyper           lipid            osa             park           stroke           tia         
 Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:2074199   FALSE:2146815   FALSE:2146651   FALSE:2146219   FALSE:2119777   FALSE:2121810  
 TRUE :72700     TRUE :84        TRUE :248       TRUE :680       TRUE :27122     TRUE :25089    
                                                                                                
                                                                                                
                                                                                                

> # Patients with HF diagnoses (DX1-9)----
> dt2 <- data.table(apply(Reduce("+", dtt),
+                         MARGIN = 2,
+                         .... [TRUNCATED] 

> kable(format(data.frame(N_Records = colSums(dt2)),
+              big.mark = ","))


|       |N_Records |
|:------|:---------|
|af     |567,337   |
|ami    |118,370   |
|anemia |265,617   |
|ckd    |270,465   |
|copd   |532,747   |
|diab   |815,966   |
|hf     |1,083,733 |
|hyper  |1,385,752 |
|lipid  |392,947   |
|osa    |30,907    |
|park   |22,822    |
|stroke |35,718    |
|tia    |33,176    |

>   # |       |N_Records |
>   # |:------|:---------|
>   # |af     |567,337   |
>   # |ami    |118,370   |
>   # |anemia |265,617   |
>   # |ckd    | .... [TRUNCATED] 

> dt2 <- merge(dt1[, c("Record_ID",
+                      "Patient_ID",
+                      "patbdte",
+                      "NEWDTD",
+          .... [TRUNCATED] 

> dt.dx1$hf.dx1 <- dt.dx1$hf

> dt2 <- merge(dt2,
+              dt.dx1[, c("Record_ID",
+                         "hf.dx1")])

> dt2
         Record_ID   Patient_ID    patbdte     NEWDTD CAUSE AGE SEX  RACE       HISPAN     ADMDAT    DSCHDAT HOSP      PRIME YEAR DSCYR
      1:         1 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White      Unknown 2002-09-16 2002-09-16  001   medicare 2002  2002
      2:         2 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White Non-Hispanic 2002-10-14 2002-10-22  001   medicare 2002  2002
      3:         3 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White Non-Hispanic 2002-12-03 2002-12-03  001   medicare 2002  2002
      4:         4 -ACHMAM12030 1925-12-18 2010-03-13  J189  77   M White Non-Hispanic 2003-01-26 2003-02-02  001   medicare 2003  2003
      5:         5 -ACHMAM12030 1925-12-18 2010-03-13  J189  78   M White Non-Hispanic 2004-01-28 2004-02-04  001   medicare 2004  2004
     ---                                                                                                                               
2146895:   2146895 TUIAGUM01171 1958-03-07       <NA>        57   M Other     Hispanic 2015-07-22 2015-07-22   40   medicare 2015  2015
2146896:   2146896 TUIAGUM01171 1958-03-07       <NA>        57   M Other Non-Hispanic 2015-12-04 2015-12-05   00 COMMERCIAL 2015  2015
2146897:   2146897 WITTMAF07141 1971-09-15       <NA>        43   F Black Non-Hispanic 2015-03-21 2015-03-21   00 COMMERCIAL 2015  2015
2146898:   2146898 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-09-19 2015-09-19   00 COMMERCIAL 2015  2015
2146899:   2146899 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-10-16 2015-10-16   40 COMMERCIAL 2015  2015
            af   ami anemia   ckd  copd  diab    hf hyper lipid   osa  park stroke   tia hf.dx1
      1: FALSE FALSE   TRUE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE
      2: FALSE  TRUE  FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE
      3: FALSE FALSE  FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE
      4: FALSE  TRUE  FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE
      5: FALSE  TRUE  FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE
     ---                                                                                       
2146895: FALSE FALSE  FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE
2146896: FALSE FALSE  FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE
2146897: FALSE FALSE  FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE
2146898: FALSE FALSE  FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  FALSE FALSE   TRUE
2146899: FALSE FALSE  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE FALSE  FALSE

> # First HF discharge----
> table(hf.dx1 = dt2$hf.dx1,
+       hf = dt2$hf)
       hf
hf.dx1    FALSE    TRUE
  FALSE 1063166  610742
  TRUE        0  472991

> #                 hf
> # hf.dx1    FALSE    TRUE
> # FALSE   1063166  610742
> # TRUE          0  472991
> 
> dt2[, first := min(DSCHDAT[hf.dx1],
+  .... [TRUNCATED] 
         Record_ID   Patient_ID    patbdte     NEWDTD CAUSE AGE SEX  RACE       HISPAN     ADMDAT    DSCHDAT HOSP      PRIME YEAR DSCYR
      1:         1 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White      Unknown 2002-09-16 2002-09-16  001   medicare 2002  2002
      2:         2 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White Non-Hispanic 2002-10-14 2002-10-22  001   medicare 2002  2002
      3:         3 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White Non-Hispanic 2002-12-03 2002-12-03  001   medicare 2002  2002
      4:         4 -ACHMAM12030 1925-12-18 2010-03-13  J189  77   M White Non-Hispanic 2003-01-26 2003-02-02  001   medicare 2003  2003
      5:         5 -ACHMAM12030 1925-12-18 2010-03-13  J189  78   M White Non-Hispanic 2004-01-28 2004-02-04  001   medicare 2004  2004
     ---                                                                                                                               
2146895:   2146895 TUIAGUM01171 1958-03-07       <NA>        57   M Other     Hispanic 2015-07-22 2015-07-22   40   medicare 2015  2015
2146896:   2146896 TUIAGUM01171 1958-03-07       <NA>        57   M Other Non-Hispanic 2015-12-04 2015-12-05   00 COMMERCIAL 2015  2015
2146897:   2146897 WITTMAF07141 1971-09-15       <NA>        43   F Black Non-Hispanic 2015-03-21 2015-03-21   00 COMMERCIAL 2015  2015
2146898:   2146898 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-09-19 2015-09-19   00 COMMERCIAL 2015  2015
2146899:   2146899 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-10-16 2015-10-16   40 COMMERCIAL 2015  2015
            af   ami anemia   ckd  copd  diab    hf hyper lipid   osa  park stroke   tia hf.dx1      first
      1: FALSE FALSE   TRUE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22
      2: FALSE  TRUE  FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22
      3: FALSE FALSE  FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22
      4: FALSE  TRUE  FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22
      5: FALSE  TRUE  FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22
     ---                                                                                                  
2146895: FALSE FALSE  FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2014-10-25
2146896: FALSE FALSE  FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2014-10-25
2146897: FALSE FALSE  FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2015-09-19
2146898: FALSE FALSE  FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  FALSE FALSE   TRUE 2015-09-19
2146899: FALSE FALSE  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE FALSE  FALSE 2015-09-19

> dt2
         Record_ID   Patient_ID    patbdte     NEWDTD CAUSE AGE SEX  RACE       HISPAN     ADMDAT    DSCHDAT HOSP      PRIME YEAR DSCYR
      1:         1 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White      Unknown 2002-09-16 2002-09-16  001   medicare 2002  2002
      2:         2 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White Non-Hispanic 2002-10-14 2002-10-22  001   medicare 2002  2002
      3:         3 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White Non-Hispanic 2002-12-03 2002-12-03  001   medicare 2002  2002
      4:         4 -ACHMAM12030 1925-12-18 2010-03-13  J189  77   M White Non-Hispanic 2003-01-26 2003-02-02  001   medicare 2003  2003
      5:         5 -ACHMAM12030 1925-12-18 2010-03-13  J189  78   M White Non-Hispanic 2004-01-28 2004-02-04  001   medicare 2004  2004
     ---                                                                                                                               
2146895:   2146895 TUIAGUM01171 1958-03-07       <NA>        57   M Other     Hispanic 2015-07-22 2015-07-22   40   medicare 2015  2015
2146896:   2146896 TUIAGUM01171 1958-03-07       <NA>        57   M Other Non-Hispanic 2015-12-04 2015-12-05   00 COMMERCIAL 2015  2015
2146897:   2146897 WITTMAF07141 1971-09-15       <NA>        43   F Black Non-Hispanic 2015-03-21 2015-03-21   00 COMMERCIAL 2015  2015
2146898:   2146898 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-09-19 2015-09-19   00 COMMERCIAL 2015  2015
2146899:   2146899 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-10-16 2015-10-16   40 COMMERCIAL 2015  2015
            af   ami anemia   ckd  copd  diab    hf hyper lipid   osa  park stroke   tia hf.dx1      first
      1: FALSE FALSE   TRUE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22
      2: FALSE  TRUE  FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22
      3: FALSE FALSE  FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22
      4: FALSE  TRUE  FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22
      5: FALSE  TRUE  FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22
     ---                                                                                                  
2146895: FALSE FALSE  FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2014-10-25
2146896: FALSE FALSE  FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2014-10-25
2146897: FALSE FALSE  FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2015-09-19
2146898: FALSE FALSE  FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  FALSE FALSE   TRUE 2015-09-19
2146899: FALSE FALSE  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE FALSE  FALSE 2015-09-19

> # Admissions prior to first MI (5 years look-back)
> dt2[, prior := (DSCHDAT < first)]
         Record_ID   Patient_ID    patbdte     NEWDTD CAUSE AGE SEX  RACE       HISPAN     ADMDAT    DSCHDAT HOSP      PRIME YEAR DSCYR
      1:         1 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White      Unknown 2002-09-16 2002-09-16  001   medicare 2002  2002
      2:         2 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White Non-Hispanic 2002-10-14 2002-10-22  001   medicare 2002  2002
      3:         3 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White Non-Hispanic 2002-12-03 2002-12-03  001   medicare 2002  2002
      4:         4 -ACHMAM12030 1925-12-18 2010-03-13  J189  77   M White Non-Hispanic 2003-01-26 2003-02-02  001   medicare 2003  2003
      5:         5 -ACHMAM12030 1925-12-18 2010-03-13  J189  78   M White Non-Hispanic 2004-01-28 2004-02-04  001   medicare 2004  2004
     ---                                                                                                                               
2146895:   2146895 TUIAGUM01171 1958-03-07       <NA>        57   M Other     Hispanic 2015-07-22 2015-07-22   40   medicare 2015  2015
2146896:   2146896 TUIAGUM01171 1958-03-07       <NA>        57   M Other Non-Hispanic 2015-12-04 2015-12-05   00 COMMERCIAL 2015  2015
2146897:   2146897 WITTMAF07141 1971-09-15       <NA>        43   F Black Non-Hispanic 2015-03-21 2015-03-21   00 COMMERCIAL 2015  2015
2146898:   2146898 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-09-19 2015-09-19   00 COMMERCIAL 2015  2015
2146899:   2146899 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-10-16 2015-10-16   40 COMMERCIAL 2015  2015
            af   ami anemia   ckd  copd  diab    hf hyper lipid   osa  park stroke   tia hf.dx1      first prior
      1: FALSE FALSE   TRUE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE
      2: FALSE  TRUE  FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE
      3: FALSE FALSE  FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE
      4: FALSE  TRUE  FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE
      5: FALSE  TRUE  FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE
     ---                                                                                                        
2146895: FALSE FALSE  FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2014-10-25 FALSE
2146896: FALSE FALSE  FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2014-10-25 FALSE
2146897: FALSE FALSE  FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2015-09-19  TRUE
2146898: FALSE FALSE  FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  FALSE FALSE   TRUE 2015-09-19 FALSE
2146899: FALSE FALSE  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE FALSE  FALSE 2015-09-19 FALSE

> # First AF admissions
> dt2[, current := (DSCHDAT == first)]
         Record_ID   Patient_ID    patbdte     NEWDTD CAUSE AGE SEX  RACE       HISPAN     ADMDAT    DSCHDAT HOSP      PRIME YEAR DSCYR
      1:         1 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White      Unknown 2002-09-16 2002-09-16  001   medicare 2002  2002
      2:         2 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White Non-Hispanic 2002-10-14 2002-10-22  001   medicare 2002  2002
      3:         3 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White Non-Hispanic 2002-12-03 2002-12-03  001   medicare 2002  2002
      4:         4 -ACHMAM12030 1925-12-18 2010-03-13  J189  77   M White Non-Hispanic 2003-01-26 2003-02-02  001   medicare 2003  2003
      5:         5 -ACHMAM12030 1925-12-18 2010-03-13  J189  78   M White Non-Hispanic 2004-01-28 2004-02-04  001   medicare 2004  2004
     ---                                                                                                                               
2146895:   2146895 TUIAGUM01171 1958-03-07       <NA>        57   M Other     Hispanic 2015-07-22 2015-07-22   40   medicare 2015  2015
2146896:   2146896 TUIAGUM01171 1958-03-07       <NA>        57   M Other Non-Hispanic 2015-12-04 2015-12-05   00 COMMERCIAL 2015  2015
2146897:   2146897 WITTMAF07141 1971-09-15       <NA>        43   F Black Non-Hispanic 2015-03-21 2015-03-21   00 COMMERCIAL 2015  2015
2146898:   2146898 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-09-19 2015-09-19   00 COMMERCIAL 2015  2015
2146899:   2146899 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-10-16 2015-10-16   40 COMMERCIAL 2015  2015
            af   ami anemia   ckd  copd  diab    hf hyper lipid   osa  park stroke   tia hf.dx1      first prior current
      1: FALSE FALSE   TRUE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE   FALSE
      2: FALSE  TRUE  FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE   FALSE
      3: FALSE FALSE  FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE   FALSE
      4: FALSE  TRUE  FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE   FALSE
      5: FALSE  TRUE  FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE   FALSE
     ---                                                                                                                
2146895: FALSE FALSE  FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2014-10-25 FALSE   FALSE
2146896: FALSE FALSE  FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2014-10-25 FALSE   FALSE
2146897: FALSE FALSE  FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2015-09-19  TRUE   FALSE
2146898: FALSE FALSE  FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  FALSE FALSE   TRUE 2015-09-19 FALSE    TRUE
2146899: FALSE FALSE  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE FALSE  FALSE 2015-09-19 FALSE   FALSE

> # Summary
> summary(dt2)
   Record_ID        Patient_ID           patbdte               NEWDTD              CAUSE                AGE         SEX        
 Min.   :      1   Length:2146899     Min.   :1886-12-09   Min.   :1995-01-01   Length:2146899     Min.   : 18.00   F:1140467  
 1st Qu.: 536726   Class :character   1st Qu.:1921-07-28   1st Qu.:2003-04-19   Class :character   1st Qu.: 63.00   M:1006432  
 Median :1073450   Mode  :character   Median :1930-02-13   Median :2008-04-03   Mode  :character   Median : 75.00              
 Mean   :1073450                      Mean   :1932-11-19   Mean   :2007-08-21                      Mean   : 72.35              
 3rd Qu.:1610175                      3rd Qu.:1942-10-20   3rd Qu.:2012-05-13                      3rd Qu.: 83.00              
 Max.   :2146899                      Max.   :1997-04-15   Max.   :2015-12-31                      Max.   :112.00              
                                                           NA's   :732875                                                      
    RACE                  HISPAN            ADMDAT              DSCHDAT               HOSP                               PRIME        
 White:1573317   Hispanic    : 178561   Min.   :1995-01-01   Min.   :1995-01-01   Length:2146899     medicare               :1511245  
 Black: 379584   Non-Hispanic:1763503   1st Qu.:2000-08-04   1st Qu.:2000-08-11   Class :character   COMMERCIAL             : 505418  
 Other: 193998   Unknown     : 204835   Median :2005-12-05   Median :2005-12-12   Mode  :character   medicaid/self-pay/other: 130236  
                                        Mean   :2005-09-25   Mean   :2005-10-01                                                       
                                        3rd Qu.:2010-10-31   3rd Qu.:2010-11-04                                                       
                                        Max.   :2015-12-31   Max.   :2015-12-31                                                       
                                                                                                                                      
     YEAR              DSCYR               af             ami            anemia           ckd             copd            diab        
 Length:2146899     Length:2146899     Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 Class :character   Class :character   FALSE:1579562   FALSE:2028529   FALSE:1881282   FALSE:1876434   FALSE:1614152   FALSE:1330933  
 Mode  :character   Mode  :character   TRUE :567337    TRUE :118370    TRUE :265617    TRUE :270465    TRUE :532747    TRUE :815966   
                                                                                                                                      
                                                                                                                                      
                                                                                                                                      
                                                                                                                                      
     hf            hyper           lipid            osa             park           stroke           tia            hf.dx1       
 Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:1063166   FALSE:761147    FALSE:1753952   FALSE:2115992   FALSE:2124077   FALSE:2111181   FALSE:2113723   FALSE:1673908  
 TRUE :1083733   TRUE :1385752   TRUE :392947    TRUE :30907     TRUE :22822     TRUE :35718     TRUE :33176     TRUE :472991   
                                                                                                                                
                                                                                                                                
                                                                                                                                
                                                                                                                                
     first              prior          current       
 Min.   :1995-01-01   Mode :logical   Mode :logical  
 1st Qu.:2000-04-19   FALSE:1363929   FALSE:1905427  
 Median :2005-05-11   TRUE :782970    TRUE :241472   
 Mean   :2005-05-25                                  
 3rd Qu.:2010-06-09                                  
 Max.   :2015-12-31                                  
                                                     

> attr(dt2, "created") <- date()

> attr(dt2, c("description")) <- "Source: 'midas15_hf_data_v1.R'."

> attributes(dt2)
$names
 [1] "Record_ID"  "Patient_ID" "patbdte"    "NEWDTD"     "CAUSE"      "AGE"        "SEX"        "RACE"       "HISPAN"     "ADMDAT"    
[11] "DSCHDAT"    "HOSP"       "PRIME"      "YEAR"       "DSCYR"      "af"         "ami"        "anemia"     "ckd"        "copd"      
[21] "diab"       "hf"         "hyper"      "lipid"      "osa"        "park"       "stroke"     "tia"        "hf.dx1"     "first"     
[31] "prior"      "current"   

$class
[1] "data.table" "data.frame"

$row.names
   [1]    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26
  [27]   27   28   29   30   31   32   33   34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49   50   51   52
  [53]   53   54   55   56   57   58   59   60   61   62   63   64   65   66   67   68   69   70   71   72   73   74   75   76   77   78
  [79]   79   80   81   82   83   84   85   86   87   88   89   90   91   92   93   94   95   96   97   98   99  100  101  102  103  104
 [105]  105  106  107  108  109  110  111  112  113  114  115  116  117  118  119  120  121  122  123  124  125  126  127  128  129  130
 [131]  131  132  133  134  135  136  137  138  139  140  141  142  143  144  145  146  147  148  149  150  151  152  153  154  155  156
 [157]  157  158  159  160  161  162  163  164  165  166  167  168  169  170  171  172  173  174  175  176  177  178  179  180  181  182
 [183]  183  184  185  186  187  188  189  190  191  192  193  194  195  196  197  198  199  200  201  202  203  204  205  206  207  208
 [209]  209  210  211  212  213  214  215  216  217  218  219  220  221  222  223  224  225  226  227  228  229  230  231  232  233  234
 [235]  235  236  237  238  239  240  241  242  243  244  245  246  247  248  249  250  251  252  253  254  255  256  257  258  259  260
 [261]  261  262  263  264  265  266  267  268  269  270  271  272  273  274  275  276  277  278  279  280  281  282  283  284  285  286
 [287]  287  288  289  290  291  292  293  294  295  296  297  298  299  300  301  302  303  304  305  306  307  308  309  310  311  312
 [313]  313  314  315  316  317  318  319  320  321  322  323  324  325  326  327  328  329  330  331  332  333  334  335  336  337  338
 [339]  339  340  341  342  343  344  345  346  347  348  349  350  351  352  353  354  355  356  357  358  359  360  361  362  363  364
 [365]  365  366  367  368  369  370  371  372  373  374  375  376  377  378  379  380  381  382  383  384  385  386  387  388  389  390
 [391]  391  392  393  394  395  396  397  398  399  400  401  402  403  404  405  406  407  408  409  410  411  412  413  414  415  416
 [417]  417  418  419  420  421  422  423  424  425  426  427  428  429  430  431  432  433  434  435  436  437  438  439  440  441  442
 [443]  443  444  445  446  447  448  449  450  451  452  453  454  455  456  457  458  459  460  461  462  463  464  465  466  467  468
 [469]  469  470  471  472  473  474  475  476  477  478  479  480  481  482  483  484  485  486  487  488  489  490  491  492  493  494
 [495]  495  496  497  498  499  500  501  502  503  504  505  506  507  508  509  510  511  512  513  514  515  516  517  518  519  520
 [521]  521  522  523  524  525  526  527  528  529  530  531  532  533  534  535  536  537  538  539  540  541  542  543  544  545  546
 [547]  547  548  549  550  551  552  553  554  555  556  557  558  559  560  561  562  563  564  565  566  567  568  569  570  571  572
 [573]  573  574  575  576  577  578  579  580  581  582  583  584  585  586  587  588  589  590  591  592  593  594  595  596  597  598
 [599]  599  600  601  602  603  604  605  606  607  608  609  610  611  612  613  614  615  616  617  618  619  620  621  622  623  624
 [625]  625  626  627  628  629  630  631  632  633  634  635  636  637  638  639  640  641  642  643  644  645  646  647  648  649  650
 [651]  651  652  653  654  655  656  657  658  659  660  661  662  663  664  665  666  667  668  669  670  671  672  673  674  675  676
 [677]  677  678  679  680  681  682  683  684  685  686  687  688  689  690  691  692  693  694  695  696  697  698  699  700  701  702
 [703]  703  704  705  706  707  708  709  710  711  712  713  714  715  716  717  718  719  720  721  722  723  724  725  726  727  728
 [729]  729  730  731  732  733  734  735  736  737  738  739  740  741  742  743  744  745  746  747  748  749  750  751  752  753  754
 [755]  755  756  757  758  759  760  761  762  763  764  765  766  767  768  769  770  771  772  773  774  775  776  777  778  779  780
 [781]  781  782  783  784  785  786  787  788  789  790  791  792  793  794  795  796  797  798  799  800  801  802  803  804  805  806
 [807]  807  808  809  810  811  812  813  814  815  816  817  818  819  820  821  822  823  824  825  826  827  828  829  830  831  832
 [833]  833  834  835  836  837  838  839  840  841  842  843  844  845  846  847  848  849  850  851  852  853  854  855  856  857  858
 [859]  859  860  861  862  863  864  865  866  867  868  869  870  871  872  873  874  875  876  877  878  879  880  881  882  883  884
 [885]  885  886  887  888  889  890  891  892  893  894  895  896  897  898  899  900  901  902  903  904  905  906  907  908  909  910
 [911]  911  912  913  914  915  916  917  918  919  920  921  922  923  924  925  926  927  928  929  930  931  932  933  934  935  936
 [937]  937  938  939  940  941  942  943  944  945  946  947  948  949  950  951  952  953  954  955  956  957  958  959  960  961  962
 [963]  963  964  965  966  967  968  969  970  971  972  973  974  975  976  977  978  979  980  981  982  983  984  985  986  987  988
 [989]  989  990  991  992  993  994  995  996  997  998  999 1000
 [ reached getOption("max.print") -- omitted 2145899 entries ]

$.internal.selfref
<pointer: 0x0000000000101ef0>

$sorted
[1] "Record_ID"

$created
[1] "Sat May 11 20:12:15 2019"

$description
[1] "Source: 'midas15_hf_data_v1.R'."


> save(dt2, 
+      file = "data/dt2.RData")

> # Remove everything except dt2----
> rm(list = setdiff(ls(), 
+                   "dt2"))

> gc()
           used  (Mb) gc trigger   (Mb)   max used    (Mb)
Ncells   969602  51.8    7047464  376.4   11011661   588.1
Vcells 70299561 536.4  891776720 6803.8 1741747569 13288.5

> # Part III----
> # load("data/dt2.RData"))
> dt2
         Record_ID   Patient_ID    patbdte     NEWDTD CAUSE AGE SEX  RACE       HISPAN     ADMDAT    DSCHDAT HOSP      PRIME YEAR DSCYR
      1:         1 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White      Unknown 2002-09-16 2002-09-16  001   medicare 2002  2002
      2:         2 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White Non-Hispanic 2002-10-14 2002-10-22  001   medicare 2002  2002
      3:         3 -ACHMAM12030 1925-12-18 2010-03-13  J189  76   M White Non-Hispanic 2002-12-03 2002-12-03  001   medicare 2002  2002
      4:         4 -ACHMAM12030 1925-12-18 2010-03-13  J189  77   M White Non-Hispanic 2003-01-26 2003-02-02  001   medicare 2003  2003
      5:         5 -ACHMAM12030 1925-12-18 2010-03-13  J189  78   M White Non-Hispanic 2004-01-28 2004-02-04  001   medicare 2004  2004
     ---                                                                                                                               
2146895:   2146895 TUIAGUM01171 1958-03-07       <NA>        57   M Other     Hispanic 2015-07-22 2015-07-22   40   medicare 2015  2015
2146896:   2146896 TUIAGUM01171 1958-03-07       <NA>        57   M Other Non-Hispanic 2015-12-04 2015-12-05   00 COMMERCIAL 2015  2015
2146897:   2146897 WITTMAF07141 1971-09-15       <NA>        43   F Black Non-Hispanic 2015-03-21 2015-03-21   00 COMMERCIAL 2015  2015
2146898:   2146898 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-09-19 2015-09-19   00 COMMERCIAL 2015  2015
2146899:   2146899 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-10-16 2015-10-16   40 COMMERCIAL 2015  2015
            af   ami anemia   ckd  copd  diab    hf hyper lipid   osa  park stroke   tia hf.dx1      first prior current
      1: FALSE FALSE   TRUE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE   FALSE
      2: FALSE  TRUE  FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE   FALSE
      3: FALSE FALSE  FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE   FALSE
      4: FALSE  TRUE  FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE   FALSE
      5: FALSE  TRUE  FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2007-07-22  TRUE   FALSE
     ---                                                                                                                
2146895: FALSE FALSE  FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2014-10-25 FALSE   FALSE
2146896: FALSE FALSE  FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE  FALSE FALSE  FALSE 2014-10-25 FALSE   FALSE
2146897: FALSE FALSE  FALSE FALSE  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE  FALSE FALSE  FALSE 2015-09-19  TRUE   FALSE
2146898: FALSE FALSE  FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE  FALSE FALSE   TRUE 2015-09-19 FALSE    TRUE
2146899: FALSE FALSE  FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  FALSE FALSE  FALSE 2015-09-19 FALSE   FALSE

> # Outcomes and histories (prior to 1st HF discharge)----
> system.time(
+   hh <- dt2[, list(Record_ID,
+                    Patient_ID,
+           .... [TRUNCATED] 
   user  system elapsed 
 222.15    0.33  226.13 

> summary(hh)
  Patient_ID          Record_ID        Patient_ID           patbdte               NEWDTD              CAUSE                AGE        
 Length:2146899     Min.   :      1   Length:2146899     Min.   :1886-12-09   Min.   :1995-01-01   Length:2146899     Min.   : 18.00  
 Class :character   1st Qu.: 536726   Class :character   1st Qu.:1921-07-28   1st Qu.:2003-04-19   Class :character   1st Qu.: 63.00  
 Mode  :character   Median :1073450   Mode  :character   Median :1930-02-13   Median :2008-04-03   Mode  :character   Median : 75.00  
                    Mean   :1073450                      Mean   :1932-11-19   Mean   :2007-08-21                      Mean   : 72.35  
                    3rd Qu.:1610175                      3rd Qu.:1942-10-20   3rd Qu.:2012-05-13                      3rd Qu.: 83.00  
                    Max.   :2146899                      Max.   :1997-04-15   Max.   :2015-12-31                      Max.   :112.00  
                                                                              NA's   :732875                                          
 SEX            RACE                  HISPAN            ADMDAT              DSCHDAT               HOSP          
 F:1140467   White:1573317   Hispanic    : 178561   Min.   :1995-01-01   Min.   :1995-01-01   Length:2146899    
 M:1006432   Black: 379584   Non-Hispanic:1763503   1st Qu.:2000-08-04   1st Qu.:2000-08-11   Class :character  
             Other: 193998   Unknown     : 204835   Median :2005-12-05   Median :2005-12-12   Mode  :character  
                                                    Mean   :2005-09-25   Mean   :2005-10-01                     
                                                    3rd Qu.:2010-10-31   3rd Qu.:2010-11-04                     
                                                    Max.   :2015-12-31   Max.   :2015-12-31                     
                                                                                                                
                     PRIME             YEAR              DSCYR               first              prior          current       
 medicare               :1511245   Length:2146899     Length:2146899     Min.   :1995-01-01   Mode :logical   Mode :logical  
 COMMERCIAL             : 505418   Class :character   Class :character   1st Qu.:2000-04-19   FALSE:1363929   FALSE:1905427  
 medicaid/self-pay/other: 130236   Mode  :character   Mode  :character   Median :2005-05-11   TRUE :782970    TRUE :241472   
                                                                         Mean   :2005-05-25                                  
                                                                         3rd Qu.:2010-06-09                                  
                                                                         Max.   :2015-12-31                                  
                                                                                                                             
   hf.dx1            hf            readm           readm.dat            days2readm post.hf.dx1      post.hf.dat         days2post.hf.dx1
 Mode :logical   Mode :logical   Mode :logical   Min.   :1995-01-07   Min.   :-1   Mode :logical   Min.   :1995-01-08   Min.   :-1      
 FALSE:1673908   FALSE:1063166   FALSE:249962    1st Qu.:2001-09-29   1st Qu.:-1   FALSE:996678    1st Qu.:2005-10-30   1st Qu.:-1      
 TRUE :472991    TRUE :1083733   TRUE :1896937   Median :2007-05-12   Median :-1   TRUE :1150221   Median :2014-07-15   Median :-1      
                                                 Mean   :NA           Mean   :-1                   Mean   :NA           Mean   :-1      
                                                 3rd Qu.:2012-09-05   3rd Qu.:-1                   3rd Qu.:NA           3rd Qu.:-1      
                                                 Max.   :NA           Max.   :-1                   Max.   :NA           Max.   :-1      
                                                                                                                                        
    dead           days2death  cvdeath         days2cvdeath    haf             hami          hanemia           hckd        
 Mode :logical   Min.   :-1   Mode :logical   Min.   :-1    Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:838138    1st Qu.:-1   FALSE:2146899   1st Qu.:-1    FALSE:1465370   FALSE:1692137   FALSE:1495357   FALSE:1852901  
 TRUE :1308761   Median :-1                   Median :-1    TRUE :681529    TRUE :454762    TRUE :651542    TRUE :293998   
                 Mean   :-1                   Mean   :-1                                                                   
                 3rd Qu.:-1                   3rd Qu.:-1                                                                   
                 Max.   :-1                   Max.   :-1                                                                   
                                                                                                                           
   hcopd           hdiab            hhf            hhyper          hlipid           hosa           hpark          hstroke       
 Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:1418039   FALSE:1238861   FALSE:1142010   FALSE:524371    FALSE:1268874   FALSE:2077639   FALSE:2111392   FALSE:1978919  
 TRUE :728860    TRUE :908038    TRUE :1004889   TRUE :1622528   TRUE :878025    TRUE :69260     TRUE :35507     TRUE :167980   
                                                                                                                                
                                                                                                                                
                                                                                                                                
                                                                                                                                
    htia        
 Mode :logical  
 FALSE:1991216  
 TRUE :155683   
                
                
                
                

> gc()
            used   (Mb) gc trigger   (Mb)   max used    (Mb)
Ncells    970046   51.9    2886643  154.2   11011661   588.1
Vcells 137862529 1051.9  456589681 3483.6 1741747569 13288.5

> # Separate first HF admissions
> # Remove all cases with no HF records
> case <- unique(subset(hh, current & hf.dx1))

> # If the are are more than 1 records of 1st MI admissions per person,
> nrow(case) - length(unique(case$Patient_ID))
[1] 231

> # Remove 231 patient with duplicate records
> case <- case[!(Patient_ID %in% Patient_ID[duplicated(Patient_ID)]), ]

> summary(case)
  Patient_ID          Record_ID        Patient_ID           patbdte               NEWDTD              CAUSE                AGE       
 Length:240623      Min.   :     13   Length:240623      Min.   :1886-12-09   Min.   :1995-01-01   Length:240623      Min.   : 18.0  
 Class :character   1st Qu.: 605996   Class :character   1st Qu.:1918-06-06   1st Qu.:2000-10-28   Class :character   1st Qu.: 66.0  
 Mode  :character   Median :1167444   Mode  :character   Median :1926-08-15   Median :2005-07-19   Mode  :character   Median : 77.0  
                    Mean   :1152330                      Mean   :1929-06-30   Mean   :2005-09-15                      Mean   : 74.6  
                    3rd Qu.:1719668                      3rd Qu.:1938-09-03   3rd Qu.:2010-09-26                      3rd Qu.: 85.0  
                    Max.   :2146898                      Max.   :1997-04-15   Max.   :2015-12-31                      Max.   :110.0  
                                                                              NA's   :88370                                          
 SEX           RACE                 HISPAN           ADMDAT              DSCHDAT               HOSP          
 F:129537   White:184744   Hispanic    : 17179   Min.   :1995-01-01   Min.   :1995-01-01   Length:240623     
 M:111086   Black: 34013   Non-Hispanic:196571   1st Qu.:1999-01-15   1st Qu.:1999-01-22   Class :character  
            Other: 21866   Unknown     : 26873   Median :2004-02-05   Median :2004-02-12   Mode  :character  
                                                 Mean   :2004-08-03   Mean   :2004-08-09                     
                                                 3rd Qu.:2009-12-30   3rd Qu.:2010-01-05                     
                                                 Max.   :2015-12-31   Max.   :2015-12-31                     
                                                                                                             
                     PRIME            YEAR              DSCYR               first              prior         current         hf.dx1       
 medicare               :169658   Length:240623      Length:240623      Min.   :1995-01-01   Mode :logical   Mode:logical   Mode:logical  
 COMMERCIAL             : 56209   Class :character   Class :character   1st Qu.:1999-01-22   FALSE:240623    TRUE:240623    TRUE:240623   
 medicaid/self-pay/other: 14756   Mode  :character   Mode  :character   Median :2004-02-12                                                
                                                                        Mean   :2004-08-09                                                
                                                                        3rd Qu.:2010-01-05                                                
                                                                        Max.   :2015-12-31                                                
                                                                                                                                          
    hf            readm           readm.dat            days2readm post.hf.dx1      post.hf.dat         days2post.hf.dx1    dead        
 Mode:logical   Mode :logical   Min.   :1995-01-07   Min.   :-1   Mode :logical   Min.   :1995-01-08   Min.   :-1       Mode :logical  
 TRUE:240623    FALSE:66644     1st Qu.:2002-01-19   1st Qu.:-1   FALSE:151411    1st Qu.:2008-12-21   1st Qu.:-1       FALSE:115262   
                TRUE :173979    Median :2009-04-02   Median :-1   TRUE :89212     Median :NA           Median :-1       TRUE :125361   
                                Mean   :NA           Mean   :-1                   Mean   :NA           Mean   :-1                      
                                3rd Qu.:NA           3rd Qu.:-1                   3rd Qu.:NA           3rd Qu.:-1                      
                                Max.   :NA           Max.   :-1                   Max.   :NA           Max.   :-1                      
                                                                                                                                       
   days2death  cvdeath         days2cvdeath    haf             hami          hanemia           hckd           hcopd        
 Min.   :-1   Mode :logical   Min.   :-1    Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 1st Qu.:-1   FALSE:240623    1st Qu.:-1    FALSE:178189    FALSE:203864    FALSE:191503    FALSE:221425    FALSE:183743   
 Median :-1                   Median :-1    TRUE :62434     TRUE :36759     TRUE :49120     TRUE :19198     TRUE :56880    
 Mean   :-1                   Mean   :-1                                                                                   
 3rd Qu.:-1                   3rd Qu.:-1                                                                                   
 Max.   :-1                   Max.   :-1                                                                                   
                                                                                                                           
   hdiab            hhf            hhyper          hlipid           hosa           hpark          hstroke           htia        
 Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:169083    FALSE:155418    FALSE:98787     FALSE:174759    FALSE:236614    FALSE:237400    FALSE:227338    FALSE:228412   
 TRUE :71540     TRUE :85205     TRUE :141836    TRUE :65864     TRUE :4009      TRUE :3223      TRUE :13285     TRUE :12211    
                                                                                                                                
                                                                                                                                
                                                                                                                                
                                                                                                                                

> # Remove patients that died at 1st HF discharge
> case <- droplevels(subset(case, (is.na(NEWDTD) | NEWDTD != first)))

> # Remove anyone with history of HF
> case <- droplevels(subset(case, !hhf))

> summary(case)
  Patient_ID          Record_ID        Patient_ID           patbdte               NEWDTD              CAUSE                AGE        
 Length:149427      Min.   :     28   Length:149427      Min.   :1889-04-10   Min.   :1995-01-11   Length:149427      Min.   : 18.00  
 Class :character   1st Qu.: 659302   Class :character   1st Qu.:1918-06-24   1st Qu.:2000-06-19   Class :character   1st Qu.: 64.00  
 Mode  :character   Median :1226087   Mode  :character   Median :1927-02-04   Median :2005-02-09   Mode  :character   Median : 76.00  
                    Mean   :1196752                      Mean   :1930-01-24   Mean   :2005-05-24                      Mean   : 73.44  
                    3rd Qu.:1766510                      3rd Qu.:1939-12-20   3rd Qu.:2010-05-14                      3rd Qu.: 84.00  
                    Max.   :2146898                      Max.   :1997-04-15   Max.   :2015-12-31                      Max.   :110.00  
                                                                              NA's   :63069                                           
 SEX          RACE                 HISPAN           ADMDAT              DSCHDAT               HOSP          
 F:79932   White:112814   Hispanic    : 11028   Min.   :1995-01-01   Min.   :1995-01-02   Length:149427     
 M:69495   Black: 22668   Non-Hispanic:120769   1st Qu.:1998-04-29   1st Qu.:1998-05-06   Class :character  
           Other: 13945   Unknown     : 17630   Median :2003-03-19   Median :2003-03-26   Mode  :character  
                                                Mean   :2004-01-01   Mean   :2004-01-07                     
                                                3rd Qu.:2009-05-16   3rd Qu.:2009-05-21                     
                                                Max.   :2015-12-30   Max.   :2015-12-31                     
                                                                                                            
                     PRIME            YEAR              DSCYR               first              prior         current         hf.dx1       
 medicare               :100459   Length:149427      Length:149427      Min.   :1995-01-02   Mode :logical   Mode:logical   Mode:logical  
 COMMERCIAL             : 38212   Class :character   Class :character   1st Qu.:1998-05-06   FALSE:149427    TRUE:149427    TRUE:149427   
 medicaid/self-pay/other: 10756   Mode  :character   Mode  :character   Median :2003-03-26                                                
                                                                        Mean   :2004-01-07                                                
                                                                        3rd Qu.:2009-05-21                                                
                                                                        Max.   :2015-12-31                                                
                                                                                                                                          
    hf            readm           readm.dat            days2readm post.hf.dx1      post.hf.dat         days2post.hf.dx1    dead        
 Mode:logical   Mode :logical   Min.   :1995-01-07   Min.   :-1   Mode :logical   Min.   :1995-01-08   Min.   :-1       Mode :logical  
 TRUE:149427    FALSE:38990     1st Qu.:2001-01-29   1st Qu.:-1   FALSE:95193     1st Qu.:2008-07-25   1st Qu.:-1       FALSE:73243    
                TRUE :110437    Median :2008-04-16   Median :-1   TRUE :54234     Median :NA           Median :-1       TRUE :76184    
                                Mean   :NA           Mean   :-1                   Mean   :NA           Mean   :-1                      
                                3rd Qu.:NA           3rd Qu.:-1                   3rd Qu.:NA           3rd Qu.:-1                      
                                Max.   :NA           Max.   :-1                   Max.   :NA           Max.   :-1                      
                                                                                                                                       
   days2death  cvdeath         days2cvdeath    haf             hami          hanemia           hckd           hcopd        
 Min.   :-1   Mode :logical   Min.   :-1    Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 1st Qu.:-1   FALSE:149427    1st Qu.:-1    FALSE:126966    FALSE:139385    FALSE:130878    FALSE:143433    FALSE:129427   
 Median :-1                   Median :-1    TRUE :22461     TRUE :10042     TRUE :18549     TRUE :5994      TRUE :20000    
 Mean   :-1                   Mean   :-1                                                                                   
 3rd Qu.:-1                   3rd Qu.:-1                                                                                   
 Max.   :-1                   Max.   :-1                                                                                   
                                                                                                                           
   hdiab            hhf            hhyper          hlipid           hosa           hpark          hstroke           htia        
 Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:118269    FALSE:149427    FALSE:81482     FALSE:120575    FALSE:148113    FALSE:147986    FALSE:143869    FALSE:144351   
 TRUE :31158                     TRUE :67945     TRUE :28852     TRUE :1314      TRUE :1441      TRUE :5558      TRUE :5076     
                                                                                                                                
                                                                                                                                
                                                                                                                                
                                                                                                                                

> case[, hf.dx1 := NULL] # All patients have it
          Patient_ID Record_ID   Patient_ID    patbdte     NEWDTD CAUSE AGE SEX  RACE       HISPAN     ADMDAT    DSCHDAT HOSP      PRIME
     1:      1000065        28      1000065 1932-07-03 2010-05-13  I251  64   M White      Unknown 1997-05-13 1997-05-16  076   medicare
     2:      1000110        45      1000110 1936-04-18       <NA>        75   M Other     Hispanic 2011-06-10 2011-06-14  040   medicare
     3:      1000120        51      1000120 1920-08-05 2013-11-11  I251  81   F White Non-Hispanic 2001-11-18 2001-11-23  052   medicare
     4:      1000518       129      1000518 1934-06-04 2010-08-10  I500  62   F White      Unknown 1996-10-15 1996-10-22  016 COMMERCIAL
     5:      1000997       315      1000997 1938-06-18 2015-11-28  I469  76   M White Non-Hispanic 2015-04-29 2015-05-06   30   medicare
    ---                                                                                                                                 
149423: ROERPAF08313   2146826 ROERPAF08313 1954-11-28       <NA>        60   F White Non-Hispanic 2015-06-02 2015-06-05   10 COMMERCIAL
149424: ROSAELM11031   2146831 ROSAELM11031 1921-06-27 2013-09-30  I250  92   M White Non-Hispanic 2013-07-10 2013-07-19  086 COMMERCIAL
149425: SHERBAF05151   2146863 SHERBAF05151 1943-05-01       <NA>        70   F White Non-Hispanic 2013-12-16 2013-12-16  032   medicare
149426: SWEYAGF01220   2146881 SWEYAGF01220 1915-11-14       <NA>        96   F White Non-Hispanic 2012-02-02 2012-02-06  057   medicare
149427: WITTMAF07141   2146898 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-09-19 2015-09-19   00 COMMERCIAL
        YEAR DSCYR      first prior current   hf readm  readm.dat days2readm post.hf.dx1 post.hf.dat days2post.hf.dx1  dead days2death
     1: 1997  1997 1997-05-16 FALSE    TRUE TRUE  TRUE 2000-10-26         -1        TRUE  2000-10-26               -1  TRUE         -1
     2: 2011  2011 2011-06-14 FALSE    TRUE TRUE FALSE       <NA>         -1       FALSE        <NA>               -1 FALSE         -1
     3: 2001  2001 2001-11-23 FALSE    TRUE TRUE  TRUE 2002-03-09         -1        TRUE  2004-07-15               -1  TRUE         -1
     4: 1996  1996 1996-10-22 FALSE    TRUE TRUE  TRUE 1996-12-11         -1        TRUE  1997-11-13               -1  TRUE         -1
     5: 2015  2015 2015-05-06 FALSE    TRUE TRUE  TRUE 2015-08-06         -1        TRUE  2015-08-06               -1  TRUE         -1
    ---                                                                                                                               
149423: 2015  2015 2015-06-05 FALSE    TRUE TRUE  TRUE 2015-10-03         -1       FALSE        <NA>               -1 FALSE         -1
149424: 2013  2013 2013-07-19 FALSE    TRUE TRUE FALSE       <NA>         -1       FALSE        <NA>               -1 FALSE         -1
149425: 2013  2013 2013-12-16 FALSE    TRUE TRUE  TRUE 2014-04-12         -1        TRUE  2015-12-26               -1 FALSE         -1
149426: 2012  2012 2012-02-06 FALSE    TRUE TRUE  TRUE 2012-07-11         -1       FALSE        <NA>               -1 FALSE         -1
149427: 2015  2015 2015-09-19 FALSE    TRUE TRUE  TRUE 2015-10-16         -1       FALSE        <NA>               -1 FALSE         -1
        cvdeath days2cvdeath   haf  hami hanemia  hckd hcopd hdiab   hhf hhyper hlipid  hosa hpark hstroke  htia
     1:   FALSE           -1 FALSE FALSE   FALSE FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
     2:   FALSE           -1 FALSE FALSE   FALSE FALSE FALSE  TRUE FALSE   TRUE  FALSE FALSE FALSE   FALSE FALSE
     3:   FALSE           -1 FALSE FALSE   FALSE FALSE FALSE  TRUE FALSE   TRUE   TRUE FALSE FALSE   FALSE FALSE
     4:   FALSE           -1 FALSE  TRUE    TRUE FALSE FALSE  TRUE FALSE   TRUE   TRUE FALSE FALSE   FALSE FALSE
     5:   FALSE           -1  TRUE  TRUE    TRUE FALSE FALSE  TRUE FALSE   TRUE   TRUE FALSE FALSE   FALSE FALSE
    ---                                                                                                         
149423:   FALSE           -1 FALSE FALSE   FALSE FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
149424:   FALSE           -1 FALSE FALSE   FALSE FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
149425:   FALSE           -1  TRUE FALSE   FALSE FALSE FALSE FALSE FALSE   TRUE   TRUE FALSE FALSE   FALSE FALSE
149426:   FALSE           -1 FALSE FALSE    TRUE FALSE FALSE FALSE FALSE   TRUE   TRUE FALSE FALSE    TRUE  TRUE
149427:   FALSE           -1 FALSE FALSE   FALSE FALSE  TRUE FALSE FALSE   TRUE  FALSE FALSE FALSE   FALSE FALSE

> case[, hf := NULL] # All patients have it
          Patient_ID Record_ID   Patient_ID    patbdte     NEWDTD CAUSE AGE SEX  RACE       HISPAN     ADMDAT    DSCHDAT HOSP      PRIME
     1:      1000065        28      1000065 1932-07-03 2010-05-13  I251  64   M White      Unknown 1997-05-13 1997-05-16  076   medicare
     2:      1000110        45      1000110 1936-04-18       <NA>        75   M Other     Hispanic 2011-06-10 2011-06-14  040   medicare
     3:      1000120        51      1000120 1920-08-05 2013-11-11  I251  81   F White Non-Hispanic 2001-11-18 2001-11-23  052   medicare
     4:      1000518       129      1000518 1934-06-04 2010-08-10  I500  62   F White      Unknown 1996-10-15 1996-10-22  016 COMMERCIAL
     5:      1000997       315      1000997 1938-06-18 2015-11-28  I469  76   M White Non-Hispanic 2015-04-29 2015-05-06   30   medicare
    ---                                                                                                                                 
149423: ROERPAF08313   2146826 ROERPAF08313 1954-11-28       <NA>        60   F White Non-Hispanic 2015-06-02 2015-06-05   10 COMMERCIAL
149424: ROSAELM11031   2146831 ROSAELM11031 1921-06-27 2013-09-30  I250  92   M White Non-Hispanic 2013-07-10 2013-07-19  086 COMMERCIAL
149425: SHERBAF05151   2146863 SHERBAF05151 1943-05-01       <NA>        70   F White Non-Hispanic 2013-12-16 2013-12-16  032   medicare
149426: SWEYAGF01220   2146881 SWEYAGF01220 1915-11-14       <NA>        96   F White Non-Hispanic 2012-02-02 2012-02-06  057   medicare
149427: WITTMAF07141   2146898 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-09-19 2015-09-19   00 COMMERCIAL
        YEAR DSCYR      first prior current readm  readm.dat days2readm post.hf.dx1 post.hf.dat days2post.hf.dx1  dead days2death cvdeath
     1: 1997  1997 1997-05-16 FALSE    TRUE  TRUE 2000-10-26         -1        TRUE  2000-10-26               -1  TRUE         -1   FALSE
     2: 2011  2011 2011-06-14 FALSE    TRUE FALSE       <NA>         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
     3: 2001  2001 2001-11-23 FALSE    TRUE  TRUE 2002-03-09         -1        TRUE  2004-07-15               -1  TRUE         -1   FALSE
     4: 1996  1996 1996-10-22 FALSE    TRUE  TRUE 1996-12-11         -1        TRUE  1997-11-13               -1  TRUE         -1   FALSE
     5: 2015  2015 2015-05-06 FALSE    TRUE  TRUE 2015-08-06         -1        TRUE  2015-08-06               -1  TRUE         -1   FALSE
    ---                                                                                                                                  
149423: 2015  2015 2015-06-05 FALSE    TRUE  TRUE 2015-10-03         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
149424: 2013  2013 2013-07-19 FALSE    TRUE FALSE       <NA>         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
149425: 2013  2013 2013-12-16 FALSE    TRUE  TRUE 2014-04-12         -1        TRUE  2015-12-26               -1 FALSE         -1   FALSE
149426: 2012  2012 2012-02-06 FALSE    TRUE  TRUE 2012-07-11         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
149427: 2015  2015 2015-09-19 FALSE    TRUE  TRUE 2015-10-16         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
        days2cvdeath   haf  hami hanemia  hckd hcopd hdiab   hhf hhyper hlipid  hosa hpark hstroke  htia
     1:           -1 FALSE FALSE   FALSE FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
     2:           -1 FALSE FALSE   FALSE FALSE FALSE  TRUE FALSE   TRUE  FALSE FALSE FALSE   FALSE FALSE
     3:           -1 FALSE FALSE   FALSE FALSE FALSE  TRUE FALSE   TRUE   TRUE FALSE FALSE   FALSE FALSE
     4:           -1 FALSE  TRUE    TRUE FALSE FALSE  TRUE FALSE   TRUE   TRUE FALSE FALSE   FALSE FALSE
     5:           -1  TRUE  TRUE    TRUE FALSE FALSE  TRUE FALSE   TRUE   TRUE FALSE FALSE   FALSE FALSE
    ---                                                                                                 
149423:           -1 FALSE FALSE   FALSE FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
149424:           -1 FALSE FALSE   FALSE FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
149425:           -1  TRUE FALSE   FALSE FALSE FALSE FALSE FALSE   TRUE   TRUE FALSE FALSE   FALSE FALSE
149426:           -1 FALSE FALSE    TRUE FALSE FALSE FALSE FALSE   TRUE   TRUE FALSE FALSE    TRUE  TRUE
149427:           -1 FALSE FALSE   FALSE FALSE  TRUE FALSE FALSE   TRUE  FALSE FALSE FALSE   FALSE FALSE

> case[, hhf := NULL] # No patient has it
          Patient_ID Record_ID   Patient_ID    patbdte     NEWDTD CAUSE AGE SEX  RACE       HISPAN     ADMDAT    DSCHDAT HOSP      PRIME
     1:      1000065        28      1000065 1932-07-03 2010-05-13  I251  64   M White      Unknown 1997-05-13 1997-05-16  076   medicare
     2:      1000110        45      1000110 1936-04-18       <NA>        75   M Other     Hispanic 2011-06-10 2011-06-14  040   medicare
     3:      1000120        51      1000120 1920-08-05 2013-11-11  I251  81   F White Non-Hispanic 2001-11-18 2001-11-23  052   medicare
     4:      1000518       129      1000518 1934-06-04 2010-08-10  I500  62   F White      Unknown 1996-10-15 1996-10-22  016 COMMERCIAL
     5:      1000997       315      1000997 1938-06-18 2015-11-28  I469  76   M White Non-Hispanic 2015-04-29 2015-05-06   30   medicare
    ---                                                                                                                                 
149423: ROERPAF08313   2146826 ROERPAF08313 1954-11-28       <NA>        60   F White Non-Hispanic 2015-06-02 2015-06-05   10 COMMERCIAL
149424: ROSAELM11031   2146831 ROSAELM11031 1921-06-27 2013-09-30  I250  92   M White Non-Hispanic 2013-07-10 2013-07-19  086 COMMERCIAL
149425: SHERBAF05151   2146863 SHERBAF05151 1943-05-01       <NA>        70   F White Non-Hispanic 2013-12-16 2013-12-16  032   medicare
149426: SWEYAGF01220   2146881 SWEYAGF01220 1915-11-14       <NA>        96   F White Non-Hispanic 2012-02-02 2012-02-06  057   medicare
149427: WITTMAF07141   2146898 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-09-19 2015-09-19   00 COMMERCIAL
        YEAR DSCYR      first prior current readm  readm.dat days2readm post.hf.dx1 post.hf.dat days2post.hf.dx1  dead days2death cvdeath
     1: 1997  1997 1997-05-16 FALSE    TRUE  TRUE 2000-10-26         -1        TRUE  2000-10-26               -1  TRUE         -1   FALSE
     2: 2011  2011 2011-06-14 FALSE    TRUE FALSE       <NA>         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
     3: 2001  2001 2001-11-23 FALSE    TRUE  TRUE 2002-03-09         -1        TRUE  2004-07-15               -1  TRUE         -1   FALSE
     4: 1996  1996 1996-10-22 FALSE    TRUE  TRUE 1996-12-11         -1        TRUE  1997-11-13               -1  TRUE         -1   FALSE
     5: 2015  2015 2015-05-06 FALSE    TRUE  TRUE 2015-08-06         -1        TRUE  2015-08-06               -1  TRUE         -1   FALSE
    ---                                                                                                                                  
149423: 2015  2015 2015-06-05 FALSE    TRUE  TRUE 2015-10-03         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
149424: 2013  2013 2013-07-19 FALSE    TRUE FALSE       <NA>         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
149425: 2013  2013 2013-12-16 FALSE    TRUE  TRUE 2014-04-12         -1        TRUE  2015-12-26               -1 FALSE         -1   FALSE
149426: 2012  2012 2012-02-06 FALSE    TRUE  TRUE 2012-07-11         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
149427: 2015  2015 2015-09-19 FALSE    TRUE  TRUE 2015-10-16         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
        days2cvdeath   haf  hami hanemia  hckd hcopd hdiab hhyper hlipid  hosa hpark hstroke  htia
     1:           -1 FALSE FALSE   FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
     2:           -1 FALSE FALSE   FALSE FALSE FALSE  TRUE   TRUE  FALSE FALSE FALSE   FALSE FALSE
     3:           -1 FALSE FALSE   FALSE FALSE FALSE  TRUE   TRUE   TRUE FALSE FALSE   FALSE FALSE
     4:           -1 FALSE  TRUE    TRUE FALSE FALSE  TRUE   TRUE   TRUE FALSE FALSE   FALSE FALSE
     5:           -1  TRUE  TRUE    TRUE FALSE FALSE  TRUE   TRUE   TRUE FALSE FALSE   FALSE FALSE
    ---                                                                                           
149423:           -1 FALSE FALSE   FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
149424:           -1 FALSE FALSE   FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
149425:           -1  TRUE FALSE   FALSE FALSE FALSE FALSE   TRUE   TRUE FALSE FALSE   FALSE FALSE
149426:           -1 FALSE FALSE    TRUE FALSE FALSE FALSE   TRUE   TRUE FALSE FALSE    TRUE  TRUE
149427:           -1 FALSE FALSE   FALSE FALSE  TRUE FALSE   TRUE  FALSE FALSE FALSE   FALSE FALSE

> case[, prior := NULL] # False for all patients
          Patient_ID Record_ID   Patient_ID    patbdte     NEWDTD CAUSE AGE SEX  RACE       HISPAN     ADMDAT    DSCHDAT HOSP      PRIME
     1:      1000065        28      1000065 1932-07-03 2010-05-13  I251  64   M White      Unknown 1997-05-13 1997-05-16  076   medicare
     2:      1000110        45      1000110 1936-04-18       <NA>        75   M Other     Hispanic 2011-06-10 2011-06-14  040   medicare
     3:      1000120        51      1000120 1920-08-05 2013-11-11  I251  81   F White Non-Hispanic 2001-11-18 2001-11-23  052   medicare
     4:      1000518       129      1000518 1934-06-04 2010-08-10  I500  62   F White      Unknown 1996-10-15 1996-10-22  016 COMMERCIAL
     5:      1000997       315      1000997 1938-06-18 2015-11-28  I469  76   M White Non-Hispanic 2015-04-29 2015-05-06   30   medicare
    ---                                                                                                                                 
149423: ROERPAF08313   2146826 ROERPAF08313 1954-11-28       <NA>        60   F White Non-Hispanic 2015-06-02 2015-06-05   10 COMMERCIAL
149424: ROSAELM11031   2146831 ROSAELM11031 1921-06-27 2013-09-30  I250  92   M White Non-Hispanic 2013-07-10 2013-07-19  086 COMMERCIAL
149425: SHERBAF05151   2146863 SHERBAF05151 1943-05-01       <NA>        70   F White Non-Hispanic 2013-12-16 2013-12-16  032   medicare
149426: SWEYAGF01220   2146881 SWEYAGF01220 1915-11-14       <NA>        96   F White Non-Hispanic 2012-02-02 2012-02-06  057   medicare
149427: WITTMAF07141   2146898 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-09-19 2015-09-19   00 COMMERCIAL
        YEAR DSCYR      first current readm  readm.dat days2readm post.hf.dx1 post.hf.dat days2post.hf.dx1  dead days2death cvdeath
     1: 1997  1997 1997-05-16    TRUE  TRUE 2000-10-26         -1        TRUE  2000-10-26               -1  TRUE         -1   FALSE
     2: 2011  2011 2011-06-14    TRUE FALSE       <NA>         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
     3: 2001  2001 2001-11-23    TRUE  TRUE 2002-03-09         -1        TRUE  2004-07-15               -1  TRUE         -1   FALSE
     4: 1996  1996 1996-10-22    TRUE  TRUE 1996-12-11         -1        TRUE  1997-11-13               -1  TRUE         -1   FALSE
     5: 2015  2015 2015-05-06    TRUE  TRUE 2015-08-06         -1        TRUE  2015-08-06               -1  TRUE         -1   FALSE
    ---                                                                                                                            
149423: 2015  2015 2015-06-05    TRUE  TRUE 2015-10-03         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
149424: 2013  2013 2013-07-19    TRUE FALSE       <NA>         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
149425: 2013  2013 2013-12-16    TRUE  TRUE 2014-04-12         -1        TRUE  2015-12-26               -1 FALSE         -1   FALSE
149426: 2012  2012 2012-02-06    TRUE  TRUE 2012-07-11         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
149427: 2015  2015 2015-09-19    TRUE  TRUE 2015-10-16         -1       FALSE        <NA>               -1 FALSE         -1   FALSE
        days2cvdeath   haf  hami hanemia  hckd hcopd hdiab hhyper hlipid  hosa hpark hstroke  htia
     1:           -1 FALSE FALSE   FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
     2:           -1 FALSE FALSE   FALSE FALSE FALSE  TRUE   TRUE  FALSE FALSE FALSE   FALSE FALSE
     3:           -1 FALSE FALSE   FALSE FALSE FALSE  TRUE   TRUE   TRUE FALSE FALSE   FALSE FALSE
     4:           -1 FALSE  TRUE    TRUE FALSE FALSE  TRUE   TRUE   TRUE FALSE FALSE   FALSE FALSE
     5:           -1  TRUE  TRUE    TRUE FALSE FALSE  TRUE   TRUE   TRUE FALSE FALSE   FALSE FALSE
    ---                                                                                           
149423:           -1 FALSE FALSE   FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
149424:           -1 FALSE FALSE   FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
149425:           -1  TRUE FALSE   FALSE FALSE FALSE FALSE   TRUE   TRUE FALSE FALSE   FALSE FALSE
149426:           -1 FALSE FALSE    TRUE FALSE FALSE FALSE   TRUE   TRUE FALSE FALSE    TRUE  TRUE
149427:           -1 FALSE FALSE   FALSE FALSE  TRUE FALSE   TRUE  FALSE FALSE FALSE   FALSE FALSE

> case[, current := NULL] # True for all patients
          Patient_ID Record_ID   Patient_ID    patbdte     NEWDTD CAUSE AGE SEX  RACE       HISPAN     ADMDAT    DSCHDAT HOSP      PRIME
     1:      1000065        28      1000065 1932-07-03 2010-05-13  I251  64   M White      Unknown 1997-05-13 1997-05-16  076   medicare
     2:      1000110        45      1000110 1936-04-18       <NA>        75   M Other     Hispanic 2011-06-10 2011-06-14  040   medicare
     3:      1000120        51      1000120 1920-08-05 2013-11-11  I251  81   F White Non-Hispanic 2001-11-18 2001-11-23  052   medicare
     4:      1000518       129      1000518 1934-06-04 2010-08-10  I500  62   F White      Unknown 1996-10-15 1996-10-22  016 COMMERCIAL
     5:      1000997       315      1000997 1938-06-18 2015-11-28  I469  76   M White Non-Hispanic 2015-04-29 2015-05-06   30   medicare
    ---                                                                                                                                 
149423: ROERPAF08313   2146826 ROERPAF08313 1954-11-28       <NA>        60   F White Non-Hispanic 2015-06-02 2015-06-05   10 COMMERCIAL
149424: ROSAELM11031   2146831 ROSAELM11031 1921-06-27 2013-09-30  I250  92   M White Non-Hispanic 2013-07-10 2013-07-19  086 COMMERCIAL
149425: SHERBAF05151   2146863 SHERBAF05151 1943-05-01       <NA>        70   F White Non-Hispanic 2013-12-16 2013-12-16  032   medicare
149426: SWEYAGF01220   2146881 SWEYAGF01220 1915-11-14       <NA>        96   F White Non-Hispanic 2012-02-02 2012-02-06  057   medicare
149427: WITTMAF07141   2146898 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-09-19 2015-09-19   00 COMMERCIAL
        YEAR DSCYR      first readm  readm.dat days2readm post.hf.dx1 post.hf.dat days2post.hf.dx1  dead days2death cvdeath days2cvdeath
     1: 1997  1997 1997-05-16  TRUE 2000-10-26         -1        TRUE  2000-10-26               -1  TRUE         -1   FALSE           -1
     2: 2011  2011 2011-06-14 FALSE       <NA>         -1       FALSE        <NA>               -1 FALSE         -1   FALSE           -1
     3: 2001  2001 2001-11-23  TRUE 2002-03-09         -1        TRUE  2004-07-15               -1  TRUE         -1   FALSE           -1
     4: 1996  1996 1996-10-22  TRUE 1996-12-11         -1        TRUE  1997-11-13               -1  TRUE         -1   FALSE           -1
     5: 2015  2015 2015-05-06  TRUE 2015-08-06         -1        TRUE  2015-08-06               -1  TRUE         -1   FALSE           -1
    ---                                                                                                                                 
149423: 2015  2015 2015-06-05  TRUE 2015-10-03         -1       FALSE        <NA>               -1 FALSE         -1   FALSE           -1
149424: 2013  2013 2013-07-19 FALSE       <NA>         -1       FALSE        <NA>               -1 FALSE         -1   FALSE           -1
149425: 2013  2013 2013-12-16  TRUE 2014-04-12         -1        TRUE  2015-12-26               -1 FALSE         -1   FALSE           -1
149426: 2012  2012 2012-02-06  TRUE 2012-07-11         -1       FALSE        <NA>               -1 FALSE         -1   FALSE           -1
149427: 2015  2015 2015-09-19  TRUE 2015-10-16         -1       FALSE        <NA>               -1 FALSE         -1   FALSE           -1
          haf  hami hanemia  hckd hcopd hdiab hhyper hlipid  hosa hpark hstroke  htia
     1: FALSE FALSE   FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
     2: FALSE FALSE   FALSE FALSE FALSE  TRUE   TRUE  FALSE FALSE FALSE   FALSE FALSE
     3: FALSE FALSE   FALSE FALSE FALSE  TRUE   TRUE   TRUE FALSE FALSE   FALSE FALSE
     4: FALSE  TRUE    TRUE FALSE FALSE  TRUE   TRUE   TRUE FALSE FALSE   FALSE FALSE
     5:  TRUE  TRUE    TRUE FALSE FALSE  TRUE   TRUE   TRUE FALSE FALSE   FALSE FALSE
    ---                                                                              
149423: FALSE FALSE   FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
149424: FALSE FALSE   FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
149425:  TRUE FALSE   FALSE FALSE FALSE FALSE   TRUE   TRUE FALSE FALSE   FALSE FALSE
149426: FALSE FALSE    TRUE FALSE FALSE FALSE   TRUE   TRUE FALSE FALSE    TRUE  TRUE
149427: FALSE FALSE   FALSE FALSE  TRUE FALSE   TRUE  FALSE FALSE FALSE   FALSE FALSE

> gc()
            used   (Mb) gc trigger   (Mb)   max used    (Mb)
Ncells    970497   51.9    2886643  154.2   11011661   588.1
Vcells 142298028 1085.7  456589681 3483.6 1741747569 13288.5

> # Days to events----
> # a. Days to readmission for any reason----
> case$days2readm <- as.numeric(as.character(difftime(case$readm.dat,
+           .... [TRUNCATED] 

> case$days2readm[is.infinite(case$days2readm)] <- NA

> summary(case$days2readm)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
    1.0    33.0   131.0   376.7   437.0  7234.0   38990 

> hist(case$days2readm, 100)

> # b. Days to readmission for HF----
> case$days2post.hf.dx1 <- as.numeric(as.character(difftime(case$post.hf.dat,
+                                  .... [TRUNCATED] 

> case$days2post.hf.dx1[is.infinite(case$days2post.hf.dx1)] <- NA

> summary(case$days2post.hf.dx1)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
    0.0    61.0   279.0   677.2   891.0  7339.0   95193 

> hist(case$days2post.hf.dx1, 100)

> # c. Days to all-cause death----
> case$days2death <- as.numeric(as.character(difftime(case$NEWDTD,
+                                                .... [TRUNCATED] 

> case$days2death[is.infinite(case$days2death)] <- NA

> summary(case$days2death)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
      1     211     749    1167    1722    7569   63069 

> hist(case$days2death, 100)

> # d. Days to cardiovascular death----
> # Source: http://www.health.state.ok.us/stats/Vital_Statistics/Death/039_causes.shtml
> # |----------------- .... [TRUNCATED] 

> kable(addmargins(table(all_cause_death = case$dead,
+                        cv_death = case$cvdeath)))


|      |  FALSE|  TRUE|    Sum|
|:-----|------:|-----:|------:|
|FALSE |  73243|     0|  73243|
|TRUE  |  38816| 37368|  76184|
|Sum   | 112059| 37368| 149427|

> # Row: all-cause death
> # Column: cv death
>   # |      |  FALSE|  TRUE|    Sum|
>   # |:-----|------:|-----:|------:|
>   # |FALSE |  73243|     0 .... [TRUNCATED] 

> case$days2cvdeath[!case$cvdeath] <- NA

> summary(case$days2cvdeath)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
      1     383    1078    1407    2043    7569  112059 

> hist(case$days2cvdeath, 100)

> # Summary of the subset----
> summary(case)
  Patient_ID          Record_ID        Patient_ID           patbdte               NEWDTD              CAUSE                AGE        
 Length:149427      Min.   :     28   Length:149427      Min.   :1889-04-10   Min.   :1995-01-11   Length:149427      Min.   : 18.00  
 Class :character   1st Qu.: 659302   Class :character   1st Qu.:1918-06-24   1st Qu.:2000-06-19   Class :character   1st Qu.: 64.00  
 Mode  :character   Median :1226087   Mode  :character   Median :1927-02-04   Median :2005-02-09   Mode  :character   Median : 76.00  
                    Mean   :1196752                      Mean   :1930-01-24   Mean   :2005-05-24                      Mean   : 73.44  
                    3rd Qu.:1766510                      3rd Qu.:1939-12-20   3rd Qu.:2010-05-14                      3rd Qu.: 84.00  
                    Max.   :2146898                      Max.   :1997-04-15   Max.   :2015-12-31                      Max.   :110.00  
                                                                              NA's   :63069                                           
 SEX          RACE                 HISPAN           ADMDAT              DSCHDAT               HOSP          
 F:79932   White:112814   Hispanic    : 11028   Min.   :1995-01-01   Min.   :1995-01-02   Length:149427     
 M:69495   Black: 22668   Non-Hispanic:120769   1st Qu.:1998-04-29   1st Qu.:1998-05-06   Class :character  
           Other: 13945   Unknown     : 17630   Median :2003-03-19   Median :2003-03-26   Mode  :character  
                                                Mean   :2004-01-01   Mean   :2004-01-07                     
                                                3rd Qu.:2009-05-16   3rd Qu.:2009-05-21                     
                                                Max.   :2015-12-30   Max.   :2015-12-31                     
                                                                                                            
                     PRIME            YEAR              DSCYR               first              readm           readm.dat         
 medicare               :100459   Length:149427      Length:149427      Min.   :1995-01-02   Mode :logical   Min.   :1995-01-07  
 COMMERCIAL             : 38212   Class :character   Class :character   1st Qu.:1998-05-06   FALSE:38990     1st Qu.:2001-01-29  
 medicaid/self-pay/other: 10756   Mode  :character   Mode  :character   Median :2003-03-26   TRUE :110437    Median :2008-04-16  
                                                                        Mean   :2004-01-07                   Mean   :NA          
                                                                        3rd Qu.:2009-05-21                   3rd Qu.:NA          
                                                                        Max.   :2015-12-31                   Max.   :NA          
                                                                                                                                 
   days2readm     post.hf.dx1      post.hf.dat         days2post.hf.dx1    dead           days2death     cvdeath         days2cvdeath   
 Min.   :   1.0   Mode :logical   Min.   :1995-01-08   Min.   :   0.0   Mode :logical   Min.   :   1    Mode :logical   Min.   :   1    
 1st Qu.:  33.0   FALSE:95193     1st Qu.:2008-07-25   1st Qu.:  61.0   FALSE:73243     1st Qu.: 211    FALSE:112059    1st Qu.: 383    
 Median : 131.0   TRUE :54234     Median :NA           Median : 279.0   TRUE :76184     Median : 749    TRUE :37368     Median :1078    
 Mean   : 376.7                   Mean   :NA           Mean   : 677.2                   Mean   :1167                    Mean   :1407    
 3rd Qu.: 437.0                   3rd Qu.:NA           3rd Qu.: 891.0                   3rd Qu.:1722                    3rd Qu.:2043    
 Max.   :7234.0                   Max.   :NA           Max.   :7339.0                   Max.   :7569                    Max.   :7569    
 NA's   :38990                                         NA's   :95193                    NA's   :63069                   NA's   :112059  
    haf             hami          hanemia           hckd           hcopd           hdiab           hhyper          hlipid       
 Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:126966    FALSE:139385    FALSE:130878    FALSE:143433    FALSE:129427    FALSE:118269    FALSE:81482     FALSE:120575   
 TRUE :22461     TRUE :10042     TRUE :18549     TRUE :5994      TRUE :20000     TRUE :31158     TRUE :67945     TRUE :28852    
                                                                                                                                
                                                                                                                                
                                                                                                                                
                                                                                                                                
    hosa           hpark          hstroke           htia        
 Mode :logical   Mode :logical   Mode :logical   Mode :logical  
 FALSE:148113    FALSE:147986    FALSE:143869    FALSE:144351   
 TRUE :1314      TRUE :1441      TRUE :5558      TRUE :5076     
                                                                
                                                                
                                                                
                                                                

> case
          Patient_ID Record_ID   Patient_ID    patbdte     NEWDTD CAUSE AGE SEX  RACE       HISPAN     ADMDAT    DSCHDAT HOSP      PRIME
     1:      1000065        28      1000065 1932-07-03 2010-05-13  I251  64   M White      Unknown 1997-05-13 1997-05-16  076   medicare
     2:      1000110        45      1000110 1936-04-18       <NA>        75   M Other     Hispanic 2011-06-10 2011-06-14  040   medicare
     3:      1000120        51      1000120 1920-08-05 2013-11-11  I251  81   F White Non-Hispanic 2001-11-18 2001-11-23  052   medicare
     4:      1000518       129      1000518 1934-06-04 2010-08-10  I500  62   F White      Unknown 1996-10-15 1996-10-22  016 COMMERCIAL
     5:      1000997       315      1000997 1938-06-18 2015-11-28  I469  76   M White Non-Hispanic 2015-04-29 2015-05-06   30   medicare
    ---                                                                                                                                 
149423: ROERPAF08313   2146826 ROERPAF08313 1954-11-28       <NA>        60   F White Non-Hispanic 2015-06-02 2015-06-05   10 COMMERCIAL
149424: ROSAELM11031   2146831 ROSAELM11031 1921-06-27 2013-09-30  I250  92   M White Non-Hispanic 2013-07-10 2013-07-19  086 COMMERCIAL
149425: SHERBAF05151   2146863 SHERBAF05151 1943-05-01       <NA>        70   F White Non-Hispanic 2013-12-16 2013-12-16  032   medicare
149426: SWEYAGF01220   2146881 SWEYAGF01220 1915-11-14       <NA>        96   F White Non-Hispanic 2012-02-02 2012-02-06  057   medicare
149427: WITTMAF07141   2146898 WITTMAF07141 1971-09-15       <NA>        44   F Black Non-Hispanic 2015-09-19 2015-09-19   00 COMMERCIAL
        YEAR DSCYR      first readm  readm.dat days2readm post.hf.dx1 post.hf.dat days2post.hf.dx1  dead days2death cvdeath days2cvdeath
     1: 1997  1997 1997-05-16  TRUE 2000-10-26       1259        TRUE  2000-10-26             1259  TRUE       4745    TRUE         4745
     2: 2011  2011 2011-06-14 FALSE       <NA>         NA       FALSE        <NA>               NA FALSE         NA   FALSE           NA
     3: 2001  2001 2001-11-23  TRUE 2002-03-09        106        TRUE  2004-07-15              965  TRUE       4371    TRUE         4371
     4: 1996  1996 1996-10-22  TRUE 1996-12-11         50        TRUE  1997-11-13              387  TRUE       5040    TRUE         5040
     5: 2015  2015 2015-05-06  TRUE 2015-08-06         92        TRUE  2015-08-06               92  TRUE        206    TRUE          206
    ---                                                                                                                                 
149423: 2015  2015 2015-06-05  TRUE 2015-10-03        120       FALSE        <NA>               NA FALSE         NA   FALSE           NA
149424: 2013  2013 2013-07-19 FALSE       <NA>         NA       FALSE        <NA>               NA FALSE         73   FALSE           NA
149425: 2013  2013 2013-12-16  TRUE 2014-04-12        117        TRUE  2015-12-26              740 FALSE         NA   FALSE           NA
149426: 2012  2012 2012-02-06  TRUE 2012-07-11        156       FALSE        <NA>               NA FALSE         NA   FALSE           NA
149427: 2015  2015 2015-09-19  TRUE 2015-10-16         27       FALSE        <NA>               NA FALSE         NA   FALSE           NA
          haf  hami hanemia  hckd hcopd hdiab hhyper hlipid  hosa hpark hstroke  htia
     1: FALSE FALSE   FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
     2: FALSE FALSE   FALSE FALSE FALSE  TRUE   TRUE  FALSE FALSE FALSE   FALSE FALSE
     3: FALSE FALSE   FALSE FALSE FALSE  TRUE   TRUE   TRUE FALSE FALSE   FALSE FALSE
     4: FALSE  TRUE    TRUE FALSE FALSE  TRUE   TRUE   TRUE FALSE FALSE   FALSE FALSE
     5:  TRUE  TRUE    TRUE FALSE FALSE  TRUE   TRUE   TRUE FALSE FALSE   FALSE FALSE
    ---                                                                              
149423: FALSE FALSE   FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
149424: FALSE FALSE   FALSE FALSE FALSE FALSE  FALSE  FALSE FALSE FALSE   FALSE FALSE
149425:  TRUE FALSE   FALSE FALSE FALSE FALSE   TRUE   TRUE FALSE FALSE   FALSE FALSE
149426: FALSE FALSE    TRUE FALSE FALSE FALSE   TRUE   TRUE FALSE FALSE    TRUE  TRUE
149427: FALSE FALSE   FALSE FALSE  TRUE FALSE   TRUE  FALSE FALSE FALSE   FALSE FALSE

> gc()
            used   (Mb) gc trigger   (Mb)   max used    (Mb)
Ncells    978442   52.3    2886643  154.2   11011661   588.1
Vcells 142274172 1085.5  456589681 3483.6 1741747569 13288.5

> # Save----
> attr(case, "created") <- date()

> attr(case, c("description")) <- "Source: 'midas15_hf_data_v1.R'."

> attributes(case)
$row.names
   [1]    1    2    3    4    5    6    7    8    9   10   11   12   13   14   15   16   17   18   19   20   21   22   23   24   25   26
  [27]   27   28   29   30   31   32   33   34   35   36   37   38   39   40   41   42   43   44   45   46   47   48   49   50   51   52
  [53]   53   54   55   56   57   58   59   60   61   62   63   64   65   66   67   68   69   70   71   72   73   74   75   76   77   78
  [79]   79   80   81   82   83   84   85   86   87   88   89   90   91   92   93   94   95   96   97   98   99  100  101  102  103  104
 [105]  105  106  107  108  109  110  111  112  113  114  115  116  117  118  119  120  121  122  123  124  125  126  127  128  129  130
 [131]  131  132  133  134  135  136  137  138  139  140  141  142  143  144  145  146  147  148  149  150  151  152  153  154  155  156
 [157]  157  158  159  160  161  162  163  164  165  166  167  168  169  170  171  172  173  174  175  176  177  178  179  180  181  182
 [183]  183  184  185  186  187  188  189  190  191  192  193  194  195  196  197  198  199  200  201  202  203  204  205  206  207  208
 [209]  209  210  211  212  213  214  215  216  217  218  219  220  221  222  223  224  225  226  227  228  229  230  231  232  233  234
 [235]  235  236  237  238  239  240  241  242  243  244  245  246  247  248  249  250  251  252  253  254  255  256  257  258  259  260
 [261]  261  262  263  264  265  266  267  268  269  270  271  272  273  274  275  276  277  278  279  280  281  282  283  284  285  286
 [287]  287  288  289  290  291  292  293  294  295  296  297  298  299  300  301  302  303  304  305  306  307  308  309  310  311  312
 [313]  313  314  315  316  317  318  319  320  321  322  323  324  325  326  327  328  329  330  331  332  333  334  335  336  337  338
 [339]  339  340  341  342  343  344  345  346  347  348  349  350  351  352  353  354  355  356  357  358  359  360  361  362  363  364
 [365]  365  366  367  368  369  370  371  372  373  374  375  376  377  378  379  380  381  382  383  384  385  386  387  388  389  390
 [391]  391  392  393  394  395  396  397  398  399  400  401  402  403  404  405  406  407  408  409  410  411  412  413  414  415  416
 [417]  417  418  419  420  421  422  423  424  425  426  427  428  429  430  431  432  433  434  435  436  437  438  439  440  441  442
 [443]  443  444  445  446  447  448  449  450  451  452  453  454  455  456  457  458  459  460  461  462  463  464  465  466  467  468
 [469]  469  470  471  472  473  474  475  476  477  478  479  480  481  482  483  484  485  486  487  488  489  490  491  492  493  494
 [495]  495  496  497  498  499  500  501  502  503  504  505  506  507  508  509  510  511  512  513  514  515  516  517  518  519  520
 [521]  521  522  523  524  525  526  527  528  529  530  531  532  533  534  535  536  537  538  539  540  541  542  543  544  545  546
 [547]  547  548  549  550  551  552  553  554  555  556  557  558  559  560  561  562  563  564  565  566  567  568  569  570  571  572
 [573]  573  574  575  576  577  578  579  580  581  582  583  584  585  586  587  588  589  590  591  592  593  594  595  596  597  598
 [599]  599  600  601  602  603  604  605  606  607  608  609  610  611  612  613  614  615  616  617  618  619  620  621  622  623  624
 [625]  625  626  627  628  629  630  631  632  633  634  635  636  637  638  639  640  641  642  643  644  645  646  647  648  649  650
 [651]  651  652  653  654  655  656  657  658  659  660  661  662  663  664  665  666  667  668  669  670  671  672  673  674  675  676
 [677]  677  678  679  680  681  682  683  684  685  686  687  688  689  690  691  692  693  694  695  696  697  698  699  700  701  702
 [703]  703  704  705  706  707  708  709  710  711  712  713  714  715  716  717  718  719  720  721  722  723  724  725  726  727  728
 [729]  729  730  731  732  733  734  735  736  737  738  739  740  741  742  743  744  745  746  747  748  749  750  751  752  753  754
 [755]  755  756  757  758  759  760  761  762  763  764  765  766  767  768  769  770  771  772  773  774  775  776  777  778  779  780
 [781]  781  782  783  784  785  786  787  788  789  790  791  792  793  794  795  796  797  798  799  800  801  802  803  804  805  806
 [807]  807  808  809  810  811  812  813  814  815  816  817  818  819  820  821  822  823  824  825  826  827  828  829  830  831  832
 [833]  833  834  835  836  837  838  839  840  841  842  843  844  845  846  847  848  849  850  851  852  853  854  855  856  857  858
 [859]  859  860  861  862  863  864  865  866  867  868  869  870  871  872  873  874  875  876  877  878  879  880  881  882  883  884
 [885]  885  886  887  888  889  890  891  892  893  894  895  896  897  898  899  900  901  902  903  904  905  906  907  908  909  910
 [911]  911  912  913  914  915  916  917  918  919  920  921  922  923  924  925  926  927  928  929  930  931  932  933  934  935  936
 [937]  937  938  939  940  941  942  943  944  945  946  947  948  949  950  951  952  953  954  955  956  957  958  959  960  961  962
 [963]  963  964  965  966  967  968  969  970  971  972  973  974  975  976  977  978  979  980  981  982  983  984  985  986  987  988
 [989]  989  990  991  992  993  994  995  996  997  998  999 1000
 [ reached getOption("max.print") -- omitted 148427 entries ]

$.internal.selfref
<pointer: 0x0000000000101ef0>

$names
 [1] "Patient_ID"       "Record_ID"        "Patient_ID"       "patbdte"          "NEWDTD"           "CAUSE"            "AGE"             
 [8] "SEX"              "RACE"             "HISPAN"           "ADMDAT"           "DSCHDAT"          "HOSP"             "PRIME"           
[15] "YEAR"             "DSCYR"            "first"            "readm"            "readm.dat"        "days2readm"       "post.hf.dx1"     
[22] "post.hf.dat"      "days2post.hf.dx1" "dead"             "days2death"       "cvdeath"          "days2cvdeath"     "haf"             
[29] "hami"             "hanemia"          "hckd"             "hcopd"            "hdiab"            "hhyper"           "hlipid"          
[36] "hosa"             "hpark"            "hstroke"          "htia"            

$class
[1] "data.table" "data.frame"

$created
[1] "Sat May 11 20:16:52 2019"

$description
[1] "Source: 'midas15_hf_data_v1.R'."


> save(case, 
+      file = file.path("data/case.RData"),
+      compress = FALSE)

> # Clean memory----
> gc()
            used   (Mb) gc trigger   (Mb)   max used    (Mb)
Ncells    978321   52.3    2886643  154.2   11011661   588.1
Vcells 142223349 1085.1  456589681 3483.6 1741747569 13288.5

> sessionInfo()
R version 3.6.0 (2019-04-26)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252    LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                           LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] icd_4.0.6         knitr_1.22        data.table_1.12.2

loaded via a namespace (and not attached):
[1] compiler_3.6.0 tools_3.6.0    rappdirs_0.3.1 Rcpp_1.0.1     highr_0.8      xfun_0.6      

> sink()
